# jPulse Framework v1.6.4

jPulse Framework is a web application framework, designed to build scalable and secure applications for enterprise and government organizations. Developers can focus on the business logic, while jPulse handles foundational infrastructure, such as user management, authentication, logging, real-time communication, and scaling. Built on MVC architecture, jPulse uniquely supports both MPA and SPA patterns, giving developers flexibility to choose the right architecture for each part of their application. Our guiding philosophy is "don't make me think," creating intuitive development experiences that accelerate productivity, enhanced further by AI-assisted development (vibe coding).

## Why jPulse?

**ðŸ“Š Considering jPulse?** See our [Framework Comparison Guide](docs/framework-comparison.md) comparing jPulse with NestJS, Django, Rails, Laravel, Next.js, and other alternatives.

### ðŸŽ¯ **Enterprise-Focused**
Designed specifically for midsize to large organizations in government and private sectors, with built-in security, compliance, and scalability features.

### ðŸš€ **"Don't Make Me Think" Philosophy**
Clean APIs, zero-configuration auto-discovery, and intuitive development patterns that eliminate cognitive load and accelerate development.

### ðŸ”„ **Seamless Updates**
A solid site override architecture enables framework updates without losing customizations - your site code stays safe in the `site/` directory.

### ðŸ—ï¸ **Flexible Architecture**
**MVC at the core** with support for both **Multi-Page Applications (MPA)** and **Single Page Applications (SPA)**. Use traditional MPA for content-focused pages, enhanced MPA for interactive features, or full SPA for app-like experiences - all in the same application.

### ðŸŽ­ **MEVN Stack**
Full-stack JavaScript with **MongoDB** for data, **Express** for routing, **Vue.js** for SPAs, and **Node.js** as the runtime. Optional Vue.js usage means you can build traditional MPAs and/or modern SPAs based on your needs.

### ðŸ¤– **AI-Assisted Development**
jPulse Framework is designed for **Gen-AI development** (aka "vibe coding") - leveraging AI assistants like Cursor, Cline, GitHub Copilot, or Windsurf to accelerate application development while maintaining framework best practices.

## Quick Start

### For Site Development (Recommended)

```bash
# Create a new jPulse site
mkdir my-jpulse-site && cd my-jpulse-site
npx jpulse-install
npx jpulse configure
npm install
npm start
# Visit http://localhost:8080
```

ðŸ“– **Complete Installation Guide**: See [Installation Documentation](docs/installation.md) for detailed setup instructions, production deployment, and troubleshooting.

### For Framework Development

```bash
# Clone and install
git clone https://github.com/jpulse-net/jpulse-framework.git
cd jpulse-framework
npm install

# Start development server
npm start
# Visit http://localhost:8080
```

## Key Features

- **MPA & SPA Support**: Choose the right architecture for each page - traditional MPA, enhanced MPA, or full SPA
- **MVC Architecture**: Clean Model-View-Controller pattern with flexible View placement (server or browser)
- **MEVN Stack**: MongoDB + Express + Vue.js + Node.js for full-stack JavaScript development
- **Real-Time Multi-User Communication**:
  - **Application Cluster Broadcasting** for state synchronization across servers (collaborative editing, notifications)
  - **WebSocket** for bi-directional real-time interactions (chat, live updates, gaming)
  - **Redis Clustering**: Multi-instance coordination for sessions, broadcasts, and WebSocket across servers
- **Site Override System**: Customize without fear of losing changes during updates
  - **File-Level Override**: `.shtml` templates replace framework versions
  - **Append Mode**: `.js` and `.css` files concatenate site + framework for easy extension
  - **Navigation Direct Mutation**: Add, modify, or delete navigation sections without full file duplication
- **Zero Configuration**: Auto-discovery of controllers, API routes, and SPA routing:
  - Create `controller/product.js` with `static async api()` â†’ automatically registered at `GET /api/1/product`
  - Add `static async apiCreate()` â†’ automatically registered at `POST /api/1/product`
  - Add `view/my-app/index.shtml` with Vue Router â†’ automatically detects SPA, supports page reloads on all sub-routes
  - Just create files following naming conventions - framework handles discovery, registration, and routing!
- **Plugin Infrastructure**: Extend framework functionality with zero configuration
  - Drop plugins in `plugins/` directory â†’ automatically discovered and integrated
  - Plugin-aware path resolution: site > plugins > framework priority
  - Admin UI for enabling/disabling plugins and managing configurations
  - Dynamic form generation from JSON schema for plugin settings
  - Complete MVC support: controllers, models, views, static assets, documentation
  - Ships with `hello-world` demo plugin showcasing all capabilities
- **Health Metrics**: Aggregated across instances on all app servers
- **Enterprise Security**: Built-in authentication, session management, security headers, and HTML sanitization
- **Internationalization**: Complete i18n support with dynamic translation loading
- **Testing Framework**: 2000+ tests with automated cleanup and isolation
- **Production Ready**: nginx integration, PM2 clustering, MongoDB replica sets

## Deployment Requirements

### System Dependencies
- **Node.js 18 LTS** (runtime)
- **MongoDB 6.0+** (database)
- **Redis 6.0+** (caching, sessions, pub/sub)
- **nginx** (reverse proxy, production)
- **PM2** (process manager, production)

### Single Instance (Development)
- âœ… **Redis Optional**: Sessions use memory/MongoDB fallback
- âœ… **WebSocket**: Local only (single instance)
- âœ… **App Cluster**: Local only (single instance)

### Multi-Instance (PM2 Cluster)
- âœ… **Redis Required**: For cross-instance communication
- âœ… **WebSocket**: Shared across all instances via Redis pub/sub
- âœ… **App Cluster**: Broadcasts across all instances via Redis pub/sub
- âœ… **Sessions**: Shared across all instances via Redis storage

### Multi-Server (Load Balanced)
- âœ… **Redis Required**: For cross-server communication
- âœ… **WebSocket**: Shared across all servers via Redis pub/sub
- âœ… **App Cluster**: Broadcasts across all servers via Redis pub/sub
- âœ… **Sessions**: Shared across all servers via Redis storage
- âœ… **Health Metrics**: Aggregated across all instances and servers

## Architecture Overview

### Update-Safe Three-Tier Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 â”‚
â”‚            Site code            â”‚   Location: my-jpulse-site/site/
â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 â”‚   Install:
â”‚          Plugins code           â”‚     npm install @jpulse-net/plugin-[name]
â”‚                                 â”‚   Location: my-jpulse-site/plugins/
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 â”‚   Install:  npx jpulse-install
â”‚      jPulse Framework code      â”‚   Update:   npx jpulse update
â”‚                                 â”‚   Location: my-jpulse-site/webapp/
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Site Structure (After `npx jpulse configure`)

```
my-jpulse-site/
â”œâ”€â”€ site/                 # Your custom code (highest priority, update-safe)
â”‚   â””â”€â”€ webapp/           # Site MVC components (overrides)
â”‚       â”œâ”€â”€ app.conf      # Site configuration
â”‚       â”œâ”€â”€ controller/   # Custom controllers
â”‚       â”œâ”€â”€ model/        # Custom models
â”‚       â”œâ”€â”€ view/         # Custom views (pages and templates)
â”‚       â””â”€â”€ static/       # Custom assets
â”œâ”€â”€ plugins/              # Installed plugins (middle priority, drop-in extensions)
â”‚   â””â”€â”€ [plugin-name]/    # Each plugin in its own directory
â”‚       â”œâ”€â”€ plugin.json   # Plugin metadata and dependencies
â”‚       â”œâ”€â”€ webapp/       # Plugin MVC components
â”‚       â””â”€â”€ docs/         # Plugin documentation
â”œâ”€â”€ webapp/               # Framework files (lowest priority)
â”‚   â”œâ”€â”€ controller/       # Base controllers
â”‚   â”œâ”€â”€ model/            # Data models
â”‚   â”œâ”€â”€ view/             # Base views (pages and templates)
â”‚   â””â”€â”€ static/           # Framework assets
â”œâ”€â”€ logs -> /var/log/...  # Symbolic link to system log directory
â””â”€â”€ package.json          # Dependencies (@jpulse-net/jpulse-framework)
```

**File Resolution Priority:**
1. `site/webapp/[path]` (your custom code, highest priority)
2. `plugins/[plugin-name]/webapp/[path]` (plugin files, in dependency order)
3. `webapp/[path]` (framework defaults, managed by jpulse update)

**Framework Updates:**
```bash
# Update to latest production version:
npx jpulse update

# Update to specific version (beta/RC):
npx jpulse update @jpulse-net/jpulse-framework@1.0.0-rc.1
```

## Documentation

### For Site Administrators & Site Developers
- **[Getting Started](docs/getting-started.md)** - Build your first jPulse site
- **[Installation Guide](docs/installation.md)** - Setup for all environments
- **[Framework Comparison](docs/framework-comparison.md)** - jPulse vs. alternatives (NestJS, Django, Rails, etc.)
- **[Site Customization](docs/site-customization.md)** - Master the override system
- **[API Reference](docs/api-reference.md)** - Complete framework API
- **[Examples](docs/examples.md)** - Real-world enterprise scenarios
- **[Deployment Guide](docs/deployment.md)** - Production deployment

### For jPulse Framework Developers
- **[Framework Development](docs/dev/README.md)** - Architecture and contribution guide

## Target Organizations

- **Government Agencies** - Federal, state, and local government applications
- **Healthcare Systems** - HIPAA-compliant patient portals and internal tools
- **Educational Institutions** - Student information systems and administrative tools
- **Financial Services** - Secure internal applications and customer portals
- **Professional Services** - Client portals and internal management systems

## License
Business Source License 1.1 with Additional Terms
- [License Overview](https://jpulse.net/legal/license)
- [LICENSE file](LICENSE), [Official License](https://jpulse.net/legal/license)
- [Privacy Policy](https://jpulse.net/legal/privacy)

## Latest Release Highlights

- âœ… **Version 1.6.4 - Config Schema Extensible (W-147)**: Site config schema is extensible for site and plugin developers. ConfigModel gets `extendSchema(extension)` (tab scope)â€”each extension block becomes a new tab in Admin â†’ Site Configuration. General tab added with roles and adminRoles; bootstrap from schema defaults when missing (no app.conf read). All admin/roles consumers read from ConfigModel cache: `getEffectiveAdminRoles()`, `getEffectiveRoles()` (sync, cached). Admin config UI is data-driven from schema (tabs + panels); validation adminRoles âŠ† roles; self-lockout prevention. app.conf `controller.user.adminRoles` removed; framework does not read it. Unit tests: config-model, config-general, config-manifest; integration: config-admin-roles. Docs: api-reference (Config model subsection, extendSchema, getEffective*). W-147, 2026-02-01
- âœ… **Version 1.6.3 - Handlebars Load Components (W-145)**: Server-side API to load and extract registered components from a template file without rendering. Use for email templates (subject/text/html in one file), multi-language content, or any structured data. `HandlebarController.loadComponents(req, assetPath, context)` returns `{ success, error?, components }`; dot notation in `{{#component "email.subject"}}` becomes nested keys. Path via `PathResolver.resolveAsset()` (site overrides supported). API-style return (never throws). Docs: api-reference (full), template-reference, sending-email, genai-instructions (blurbs + links). Unit tests with fixture under tests/fixtures; PathResolver mocked in test only. W-145, 2026-01-31
- âœ… **Version 1.6.2 - Redis Multi-Site Namespacing (W-146)**: Site-specific namespace isolation for Redis keys to prevent cross-contamination in multi-site deployments. Auto-prepend `${siteId}:${mode}:` prefix to all Redis keys using `app.siteId` from config (or slugified `app.site.shortName`) + `deployment.mode`. Example keys: `bubblemap-net:prod:sess:abc123`, `jpulse-net:dev:bc:controller:config:data:changed`. Extracted `CommonUtils.slugifyString()` from HandlebarController for reusability. Modified `RedisManager.getKey()` to compute and prepend namespace automatically. Health metrics aggregation now filters by matching `siteId:mode` namespace. Bug fixes: Replaced 4 raw Redis operations in health.js with `RedisManager.cacheGetObject/SetObject()`, fixed 2 instances set key operations to use `getKey()`. Added `app.siteId: 'jpulse-framework'` to default app.conf, production uses `JPULSE_SITE_ID` env var. Breaking change: Invalidates all existing Redis keys on upgrade (sessions cleared, cache rebuilt, metrics reset). Updated cache-infrastructure.md, installation.md, deployment.md, api-reference.md. Complete unit and integration tests. W-146, 2026-01-30.
- âœ… **Version 1.6.1 - Redis Cache Follow-Up (W-144)**: Polish and refinement of v1.6.0 Redis cache infrastructure. **Global naming consistency**: Fixed `global.redisManager` â†’ `global.RedisManager` throughout codebase (15 changes in appCluster.js, W-137 docs, W-143 docs). **i18n compliance**: Migrated 5 hard-coded English error messages in health.js to i18n system (complianceReportSent, complianceReportFailed, healthCheckFailed, metricsCollectionFailed, adminAccessRequired), updated log.js searchError to include error details. **Debug logging cleanup**: Removed 13 verbose DEBUG statements from cluster statistics aggregation in health.js, reducing production log noise. **Error handling improvements**: Better error reporting in compliance report API (returns error object instead of null), extended error display to 10 seconds in system-status.shtml, consistent toast API usage (jPulse.UI.toast.success/error). **Translation consolidation**: Moved reportSent/reportFailed from view to controller namespace for reuse, added 5 English + 5 German translations. Benefits: Global variable naming matches framework conventions, all user-facing errors properly internationalized, cleaner production logs, consistent error handling patterns. W-144, 2026-01-28.
- âœ… **Version 1.6.0 - Redis Cache Infrastructure (W-143)**: Dual-cache system for application data. **File cache** (framework-managed: templates/i18n/markdown). **Redis cache** (developer-controlled: application data with user-scoped isolation). **Client API**: Authenticated REST endpoints at `/api/1/app-cluster/cache/*` (set/get/delete) with automatic `userId:category:key` scoping. **Server API**: `RedisManager.cacheSet`, `.cacheGet`, `.cacheDel`, `.cacheSetObject`, `.cacheGetObject`, `.cacheIncr`, `.cacheDelPattern` with `category:key` convention. **Rate limiting**: `cacheCheckRateLimit()` helper for API throttling. **Monitoring**: System Status split into RedisManager (connectivity) and Redis Cache (performance: hit rate, gets/sets/deletes, hits/misses) cards. **Multi-instance**: Shared cache across cluster with consistent invalidation. **Graceful degradation**: Returns null if Redis unavailable. **Migration**: HealthController compliance moved to cache wrapper. **Documentation**: New 28KB [cache-infrastructure.md](docs/cache-infrastructure.md) guide, updates to api-reference.md, application-cluster.md, genai-instructions.md, site-administration.md, deployment.md. Complete unit tests (1284 lines). Zero breaking changes. W-143, 2026-01-27.
- âœ… **Version 1.5.1 - LICENSE File Distribution Fix (W-142)**: Bug fix ensuring LICENSE file is properly copied to site installations. The LICENSE file exists in the framework root and is included in the npm package, but was not being copied during `npx jpulse configure` (initial site setup) or `npx jpulse update` (framework updates), making it unavailable to site administrators despite being referenced in admin-facing documentation (docs/license.md, docs/README.md, LICENSE itself). Fix: LICENSE now copied verbatim to site root during both initial configuration and updates. Test validation ensures LICENSE presence. Bonus: Standardized all legal URLs across framework by removing `.shtml` extensions - updated LICENSE file, README.md, docs/README.md, docs/license.md, bin/config-registry.js, bin/configure.js, and webapp/view/admin/system-status.shtml for consistent clean URLs (https://jpulse.net/legal/license, /privacy, /terms-of-service). Added new License section to README.md and Legal section to docs/README.md with comprehensive links to all legal resources. W-142.
- âœ… **Version 1.5.0 - Advanced Search with Boolean Operators (W-141)**: Powerful boolean search for all schema-based queries with exact match as new default. Features: **Boolean operators** within same field - OR (`,` comma), AND (`;` semicolon), NOT (`!` prefix) with proper precedence (AND binds tighter than OR). Example: `lunch=sushi;soup,pizza;salad;!vinegar` = (sushi AND soup) OR (pizza AND salad AND NOT vinegar). **Breaking change**: Default from fuzzy to exact match (case-insensitive anchored) - `status=active` now matches only "active", not "inactive" or "reactivate". Migration: add wildcards `status=*active*` for fuzzy/contains. **Wildcard search**: `*` only (removed `%` SQL-style) - `*term*` (contains), `term*` (starts with), `*term` (ends with). **Regex support**: `/pattern/flags` for power users - e.g., `/^BC[0-9]{4}/i`, with validation and length limits (max 200 chars) to prevent ReDoS. **MongoDB collation**: Exact matches use collation (10-100x faster on large collections), patterns/regex use regex fallback. **Enhanced schemaBasedQuery**: Returns `{ query, useCollation, collation }` with auto-detection in `paginatedSearch` (backward compatible). **Multi-field search**: New `multiFieldSearch` option for searching across fields (e.g., `name` searches `firstName`, `lastName`, `username`). **Pagination fixes**: Proper RegExp and Date serialization/deserialization in cursors. **StringQueryParser**: ~250 line parser class supporting complex boolean logic with protected regex patterns. **API docs updated**: Comprehensive Advanced Search Syntax section with migration guide from v1.4.x. **2009 tests passing** (60+ new comprehensive tests). Applies to User Search, Log Search, and all future schema-based queries. W-141.
- âœ… **Version 1.4.18 - Self-Contained Plugin Installs (W-140)**: Plugin CLI now installs plugin runtime npm dependencies into `plugins/<name>/node_modules` during install/update in site context, preventing plugins from breaking after `npm install` / `npm prune` in the site root. Admin config hardening blocks password-manager autofill on sensitive fields (SMTP password, license key) and stabilizes dirty tracking. User Settings UI is now theme-safe by removing inline plugin-card styling and hard-coded colors, and standardizes date display using `jPulse.date.formatLocalDate()` / `jPulse.date.formatLocalDateAndTime()`. Removed `otplib` from framework root dependencies.
- âœ… **Version 1.4.17 - License Compliance Reporting (W-137)**: Daily compliance reporting system for Business Source License 1.1 with Additional Terms. Features automated daily usage reports to jpulse.net for license compliance monitoring during BSL period (2026-2030). UUID generation during site configuration (stored in MongoDB ConfigModel for cluster consistency). Randomized daily reporting schedule (current hour + random minute, stored in Redis, consistent per site). Client-side compliance UI in Admin Dashboard â†’ System Status with transparency widget showing Request/Response. Admin UI for manifest configuration (license key, tier, site UUID, admin email opt-in). Manual send API for testing/troubleshooting. Exponential backoff for network failures (graceful handling for air-gapped deployments). Server-side compliance classification (grace periods, thresholds, environment detection). Optional deployment dashboard access at jpulse.net/site-monitor/[uuid] with admin email opt-in. Complete documentation updates: license.md, site-administration.md, installation.md, getting-started.md, deployment.md. Unit tests for compliance scheduling and manifest defaults. LICENSE Section 11 Additional Terms added (pending legal review). W-137.
- âœ… **Version 1.4.16 - Array Handlebar Helpers & Native Type System (W-136)**: Comprehensive array manipulation system with 10 helpers organized under `array.*` namespace: `{{array.at}}` (element by index), `{{array.first}}`/`{{array.last}}` (boundary access), `{{array.includes}}` (membership test), `{{array.isEmpty}}` (empty check), `{{array.join}}` (concatenate with separator), `{{array.length}}` (size), `{{array.concat}}` (merge arrays), `{{array.reverse}}` (order reversal), `{{array.sort}}` (intelligent sorting with nested property paths, auto-type detection, locale-aware strings, null-safe). Smart sorting features: `sortBy="property.path"` with nested path support using `global.CommonUtils.getValueByPath()`, `sortAs="number"/"string"` for type override, `reverse=true` for descending order. Introduced `{{json.parse}}` helper for explicit JSON string to native type conversion. Implemented native type system: boolean helpers return native `true`/`false`, array/object helpers return native arrays/objects, numbers remain numbers, final stringification only at render time. Performance optimization with value store mechanism using `__VALUE_N__` placeholders to prevent repeated JSON.stringify/parse cycles in nested operations. Added block logical/comparison helpers: `{{#and}}`, `{{#or}}`, `{{#not}}`, `{{#eq}}`, `{{#ne}}`, `{{#gt}}`, `{{#gte}}`, `{{#lt}}`, `{{#lte}}` for conditional blocks. Updated all boolean helpers to return native types. Fixed `file.list` to return native array. Updated `{{#each}}` to handle native arrays. Complete documentation with "Type System" section, "Array Helpers" section (10 helpers), and "JSON Helpers" section. 100 comprehensive unit tests added. All 499 Handlebars tests passing (100%). W-136.
- âœ… **Version 1.4.15 - String Manipulation Handlebar Helpers (W-135)**: Added 10 powerful string manipulation helpers to Handlebars templating with variadic support (all helpers accept 1+ arguments, concatenate first, then apply operation). New helpers: `{{string.length}}` (returns string length), `{{string.lowercase}}`, `{{string.uppercase}}`, `{{string.titlecase}}` (smart English title case with punctuation preservation), `{{string.slugify}}` (URL-friendly slugs, removes diacritics, handles punctuation), `{{string.urlEncode}}`, `{{string.urlDecode}}`, `{{string.htmlEscape}}` (XSS prevention), `{{string.htmlToText}}` (smart HTML to text conversion with entity decoding), `{{string.htmlToMd}}` (HTML to Markdown conversion for headings, lists, links, formatting). Smart titlecase follows English grammar rules (doesn't capitalize articles/prepositions unless first/last word). Slugify removes diacritics and converts punctuation to hyphens. htmlToMd handles HTML attributes gracefully, supports headings, paragraphs, lists (ul/ol), links, formatting (bold/italic/code), images (alt text), basic table support. Bug fixes: improved HTML tag removal regex to handle both opening and closing tags, fixed named argument parsing to support dot notation (e.g., `config.theme="dark"`). Documentation in [Handlebars Guide](docs/handlebars.md#string-helpers). W-135.
- âœ… **Version 1.4.14 - User View SPA & Public Profile System (W-134)**: Complete Single Page Application (SPA) for user views with public profiles, user dashboard, and settings. Pure HTML/JavaScript implementation using Handlebars templates and client-side routing (no Vue.js). SPA routes: `/user/` (dashboard/directory), `/user/me` (my dashboard), `/user/settings` (settings page), `/user/{username}` (public profile view). Reserved username validation blocks 'settings' and 'me' on signup. Config-driven public profile access control with field filtering (`controller.user.profile`). New API endpoint: `GET /api/1/user/public/:id` (supports ObjectId or username). Updated API endpoint: `GET /api/1/user/search` changed from admin-only to policy-based access with field filtering. Dynamic user dropdown menu (data-driven from `jpulse-navigation.js`, desktop hover + mobile tap). Dashboard with config-driven stats cards and nav cards. Full i18n support for all user-facing text. Search results limited to 50 users (no pagination needed). i18n audit test enhancements with `// i18n-audit-ignore` directive for dynamic keys. Documentation in [API Reference](docs/api-reference.md#user-public-profile) and [MPA vs SPA Guide](docs/mpa-vs-spa.md#spa-implementation-reference-user-profile-spa). W-134.
- âœ… **Version 1.4.13 - Date Helpers Enhancement & Broadcast Message Expansion (W-133)**: Enhanced Handlebars date helpers with new `{{date.add}}` and `{{date.diff}}` helpers for date arithmetic. Added `{{user.timezone}}` context variable showing browser timezone (e.g., `America/Los_Angeles`). Broadcast messages now support Handlebars expressions (e.g., `{{date.fromNow}}`, `{{date.format}}` with timezone) that are expanded server-side at context build time and stored in `appConfig.system.broadcastMessage`. Fixed timezone conversion bug in `{{date.format}}` helper. Changed `%TIME%` and `%DATETIME%` format tokens to show `hours:minutes` instead of `hours:minutes:seconds`. Added 33 comprehensive unit tests (17 for `date.add`, 16 for `date.diff`). Documentation in [Handlebars Guide](docs/handlebars.md#date-helpers). W-133.
- âœ… **Version 1.4.12 - Date Helpers with Timezone Support & Relative Time (W-132)**: Enhanced Handlebars date helpers with timezone support and new relative time formatting. New `{{date.fromNow}}` helper formats dates as relative time (e.g., "in 6 days, 13 hours" or "2 hours ago") with configurable format (`long`/`short` with 1-3 units) and full i18n support. Enhanced `{{date.format}}` helper now supports timezone parameter: `timezone="server"` (server local time), `timezone="browser"` (browser timezone from cookie, fallback to server), or specific IANA timezone (e.g., `timezone="America/Los_Angeles"`). Automatic browser timezone detection stores timezone in cookie (30-day TTL, auto-updates when user travels). ISO format displays timezone offset (e.g., `-08:00`, `+09:00`) instead of `Z` suffix when timezone is specified. Documentation in [Handlebars Guide](docs/handlebars.md#date-helpers). W-132.
- âœ… **Version 1.4.11 - Broadcast Message System & Date Helpers (W-131)**: New broadcast message system enabling site administrators to display important messages to all users. Features fixed-position message below banner with minimize/restore button, per-user state persistence, configurable nag time, server-side auto-disable timer, HTML content support, and smooth animations. New Handlebars date helpers: `{{date.now}}` (current timestamp), `{{date.parse}}` (parse to timestamp), `{{date.format}}` (format with tokens: `%DATE%`, `%TIME%`, `%ISO%`, etc.). Context normalization utility automatically converts Date objects to Unix timestamps for math operations. Documentation in [Site Administration](docs/site-administration.md) and [Handlebars Guide](docs/handlebars.md#date-helpers). W-131.
- âœ… **Version 1.4.10 - Documentation Syntax Highlighting (W-130)**: Added Prism.js syntax highlighting for all triple backtick code blocks in markdown documentation. Features automatic language detection from code block language tags with triple backticks, seamless integration with existing Prism theme system (light/dark), and no custom renderer needed (marked.js automatically adds `language-*` classes). Enhanced ViewController with configurable raw extensions and content types via `app.conf` (`controller.view.rawExtensions` and `controller.view.contentTypes`). Removed CSS color overrides to allow Prism token colors to display properly. Works across all markdown documentation (jPulse docs and site docs). Documentation in [Markdown Documentation](markdown-docs.md). W-130.
- âœ… **Version 1.4.9 - Themes Infrastructure (W-129)**: Comprehensive theme system enabling plugin and site developers to create custom themes. Framework ships with light (default) and dark themes. Features CSS variable standardization (49 `--jp-theme-*` variables), auto-discovery from framework/plugins/site with priority resolution, dynamic theme CSS loading (only selected theme loaded), theme metadata in JSON files (name, label, description, author, version, source), 500x200 preview images, dynamic themes documentation table (`%DYNAMIC{themes-list-table}%`), schema extension (discovered themes automatically added to user preferences enum), Prism.js syntax highlighting theme switching (light/dark), instant theme preview on profile page, config-driven default theme (`appConfig.utils.theme.default`), and secure context filtering for unauthenticated users. Documentation in [Themes Guide](docs/themes.md), [Creating Themes](docs/plugins/creating-themes.md), and [Live Examples](/jpulse-examples/themes.shtml). W-129.
- âœ… **Version 1.4.8 - Handlebars String Helpers & Math Namespace (W-128)**: New string manipulation helpers organized under `string.*` namespace (consistent with `file.*`). Features 9 helpers: `{{string.concat}}`, `{{string.default}}`, `{{string.replace}}`, `{{string.substring}}`, `{{string.padLeft}}`, `{{string.padRight}}`, `{{string.startsWith}}`, `{{string.endsWith}}`, `{{string.contains}}`. Refactored all 10 math helpers to `math.*` namespace for consistency: `{{math.add}}`, `{{math.subtract}}`, `{{math.multiply}}`, `{{math.divide}}`, `{{math.mod}}`, `{{math.round}}`, `{{math.floor}}`, `{{math.ceil}}`, `{{math.min}}`, `{{math.max}}`. All helpers support nested subexpressions and work with variables. documentation in [Handlebars Guide](docs/handlebars.md#string-helpers) and [Live Examples](/jpulse-examples/handlebars.shtml#string-helpers). W-128.
- âœ… **Version 1.4.7 - Handlebars Math Helpers (W-127)**: New math helpers for performing calculations in Handlebars templates. Features 10 helpers: `{{add}}`, `{{subtract}}`, `{{multiply}}`, `{{divide}}`, `{{mod}}`, `{{round}}`, `{{floor}}`, `{{ceil}}`, `{{min}}`, `{{max}}`. Variadic support for `add`, `subtract`, `multiply`, `divide`, `min`, `max` (1+ arguments). Type coercion automatically converts string numbers to numbers. Error handling: returns 0 with warning log for invalid inputs or division by zero. Supports nested subexpressions and works with variables. Documentation in [Handlebars Guide](docs/handlebars.md#math-helpers) and [Live Examples](/jpulse-examples/handlebars.shtml#math-helpers). W-127.
- âœ… **Version 1.4.6 - Tooltip Component (W-126)**: New tooltip component for adding helpful tooltips to any element with simple HTML attributes. Features `class="jp-tooltip"` and `data-tooltip` for easy implementation, HTML content support, smart automatic positioning based on viewport, optional position and delay overrides, container support for dynamic content (dialogs), full keyboard accessibility (focus support, Escape to dismiss), mobile-friendly tap interactions, and subtle yellow styling matching warning-box design. Configurable defaults via `appConfig.view.jPulse.UI.tooltip` (position, openDelay, closeDelay). Complete API with `jPulse.UI.tooltip.initAll()` and `init()` methods. See [UI Widget Reference](docs/jpulse-ui-reference.md#tooltip-component) and [Live Examples](/jpulse-examples/ui-widgets.shtml). W-126.
- âœ… **Version 1.4.5 - Docs UX + Navigation Improvements (W-125)**: Major documentation usability improvements across Handlebars docs, examples pages, and navigation. Restructured `docs/handlebars.md` for clearer TOC navigation and easier lookup. Refactored `jpulse-examples/*` pages into numbered, long-form sections. Improved site navigation dropdown with scrollable flyout submenus (including deep flyouts without clipping). Fixed jPulse Docs pulldown so all docs groups render (not only the last one). Improved mobile hamburger menu to fully expand large/nested docs lists without clipping. Enhanced TOC with "Back to top" and h4 support; improved accessibility via i18n-backed aria labels. W-125.
- âœ… **Version 1.4.4 - Component Auto-Discovery (W-124)**: Auto-discovery of component templates (icons, sidebars, etc.) from framework, plugins, and site levels with proper override priority. Fixed `{{#each file.list}}` helper detection and added subexpression support `{{#each (file.list "pattern")}}`. Enhanced `file.include` to use plugin-aware path resolution. Simplified component includes in `jpulse-header.tmpl` to a single auto-discovery loop. W-124.
- âœ… **Version 1.4.3 - Sticky Hover Sidebars for TOC (W-123)**: Enhanced sidebar UX for documentation and long pages with a new desktop hover mode plus sticky viewport positioning for overlay/hover sidebars. Supports auto-close on link click and outside click (optional), keeps the TOC quickly accessible while reading, and retains existing toggle/always behavior. See [Sidebars Guide](docs/sidebars.md). W-123.
- âœ… **Version 1.4.2 - Documentation Filtering Bug Fix**: Patch release fixing regression where ignored docs files were appearing in site deployments. Fixed `bin/configure.js` and `bin/jpulse-update.js` to properly apply `.markdown` `[ignore]` patterns during install/upgrade. Added symlink handling fix and framework repo safeguard. All tests passing. No breaking changes.
- âœ… **Version 1.4.1 - Flexible Sidebar Infrastructure**: Complete left and right sidebar system with component-based architecture, responsive design, and extensive configuration options. Features dual independent sidebars with 'toggle' and 'always' modes, built-in components (site navigation, table of contents, page-specific content), desktop UX (drag-to-resize, toggle buttons, reflow/overlay), mobile UX (fixed overlay, swipe gestures, touch-optimized), user preferences, page integration, complete JavaScript API (`jPulse.UI.sidebars`), and plugin support. See [Sidebars Guide](docs/sidebars.md) and [Sidebar Components Guide](docs/sidebar-components.md). W-068.
- âœ… **Version 1.3.22 - Markdown Ignore Files Bug Fix**: Bug fix release addressing issue where files specified in `docs/.markdown` `[ignore]` section were still accessible in published npm package. Fixed by adding excluded files (`docs/dev/roadmap.md` and `docs/dev/design/`) to `.npmignore` to exclude them at package build time. Simplified `bin/jpulse-update.js` to basic recursive copy since package already contains pre-filtered documentation. No breaking changes. See [Markdown Documentation](docs/markdown-docs.md).
- âœ… **Version 1.3.21 - Markdown Publishing Directives**: Feature release adding comprehensive control over markdown documentation publishing with new `.markdown` configuration file. Custom ordering via `[publish-list]` section: explicitly listed files appear first in specified order, remaining files published alphabetically. Custom page titles supported in `[publish-list]` section. Ignore patterns moved from `.jpulse-ignore` to `[ignore]` section in `.markdown` (gitignore-like syntax, takes precedence over publish-list). Title case fixes merged from `app.conf` defaults + `.markdown` `[title-case-fix]` section overrides. Sidebar navigation now follows `[publish-list]` order instead of alphabetical. Directories with only README.md display as regular document links (not expandable directories) for better visual clarity. Virtual README generation for directories without physical README.md. Code block rendering fixed to preserve `.md` extensions in documentation examples. Updated `bin/jpulse-update.js` to use `.markdown` configuration with same behavior as markdown controller. Comprehensive documentation updates: markdown-docs.md, api-reference.md, site-customization.md. Unit tests: markdown-ignore.test.js updated, markdown-publish-list.test.js created. Graceful error handling: missing or invalid `.markdown` files fall back to defaults (no warnings). See [Work Item W-120](docs/dev/work-items.md) and [Markdown Documentation](docs/markdown-docs.md). Breaking change: `.jpulse-ignore` replaced by `.markdown` `[ignore]` section (no backwards compatibility).
- âœ… **Version 1.3.20 - i18n Usage Audit Tests**: Testing release adding comprehensive automated tests for translation key consistency and i18n usage validation across the framework. Translation key comparison test ensures all language files have matching key structures (en.conf as reference). View i18n usage validation checks all `{{i18n.*}}` references in view files (.js, .css, .tmpl, .shtml) are valid. Controller i18n usage validation checks all `global.i18n.translate()` calls use valid keys. Detects and reports dynamic keys (variables, string concatenation, template literals) as warnings. Performance: < 2 seconds for full audit. Comprehensive utilities: translation-loader.js (load, parse, flatten translation files), key-validator.js (validate keys against reference), key-extractor.js (extract keys from views/controllers with regex patterns). Standalone find-dynamic-keys.js script for discovering dynamic i18n keys. Enhanced test-all.js with warning aggregation from all test suites (CLI Tools, Enhanced CLI, MongoDB, Unit Tests, Integration Tests) displaying single summary at end. Standardized "WARNING:" format across all bin/ scripts (configure.js, config-registry.js, plugin-manager-cli.js) for consistent detection. See [Work Item W-119](docs/dev/work-items.md). No breaking changes.
- âœ… **Version 1.3.19 - GitHub-Style Heading Anchor Links**: Feature release adding automatic anchor links to all headings (h1-h6) across all jPulse pages for deep linking and content sharing. GitHub-compatible slugification: lowercase conversion, spaces to hyphens, punctuation removal, Unicode preservation, duplicate handling with `-1`, `-2` suffixes. Universal implementation works on all page types (`.shtml` templates, markdown docs, dynamically rendered content) with single JavaScript solution and no npm dependencies. Configurable via `app.conf`: enable/disable, specify heading levels, customize icon. Features hover-to-reveal ðŸ”— icon, click-to-copy URL with anchor fragment, clipboard integration with i18n toast notifications, URL update with anchor fragment, and target highlighting animation. Robust ID conflict resolution checks against ALL existing DOM IDs (not just headings). Comprehensive test coverage: 33 unit tests covering slug generation, ID generation, link creation, click behavior, configuration, and edge cases. Complete documentation: widget reference guide, site customization guide, CSS style reference, live interactive examples. Works seamlessly with SPA navigation and dynamic content loading. See [Work Item W-118](docs/dev/work-items.md) and [UI Widget Reference](docs/jpulse-ui-reference.md#heading-anchor-links). No breaking changes.
- âœ… **Version 1.3.18 - Performance Optimization & Security Hardening**: Refactoring release focused on performance optimization, security hardening, and technical debt removal. Context caching optimization: moved `_buildInternalContext()` to `expandHandlebars()` (depth 0 only), cached on `req.baseContext` for reuse across nested `{{file.include}}` calls, eliminating redundant context rebuilds for significant performance improvement. Security hardening with 206 new unit tests across 4 critical functions: XSS prevention (`sanitizeHtml()` - 55 tests covering script/style removal, event handlers, protocols, attack vectors), path traversal prevention (`_validatePluginName()` - 68 tests blocking directory traversal attacks), metrics infrastructure reliability (`MetricsRegistry` - 47 tests for registration/validation/error handling), Handlebars context extension system (`ContextExtensions` - 36 tests for provider management/priority/caching). Technical debt removal: eliminated all 16 skipped unit tests (health.test.js: 6 removed, admin-view.test.js: deleted entire file with 10 tests) - all functionality covered by integration tests. Documentation enhancements: distinguished jPulse Handlebars (server-side, `{{variable}}`) vs Vue.js (client-side, `{{ variable }}`), added site developer helper creation guide in site-customization.md. Added 7 context caching tests. Total impact: +213 new tests (1375 total), -16 skipped tests (0 remaining), 100% pass rate. Test suites: 55 unit (1270 tests), 10 integration (105 tests). Security: XSS prevention, path traversal blocking, input validation. Infrastructure: metrics reliability, context extension validation. Performance: context caching for nested templates. Quality: zero technical debt. See [Work Item W-117](docs/dev/work-items.md). No breaking changes.
- âœ… **Version 1.3.17 - Handlebars Plugin Interface for Custom Helpers**: Feature release enabling site developers and plugin developers to create custom Handlebars helpers using auto-discovery pattern. Methods starting with `handlebar*` in controllers are automatically registered during bootstrap (no manual registration needed). Unified interface: Regular helpers `(args, context)`, Block helpers `(args, blockContent, context)`. Both helper types receive parsed `args` object with pre-evaluated subexpressions. Framework utilities available via `context._handlebar.*` (req, depth, expandHandlebars, parseAndEvaluateArguments, getNestedProperty, setNestedProperty). Auto-documentation: JSDoc `@description` and `@example` tags automatically extracted and included in helper documentation. Dynamic documentation via `%DYNAMIC{handlebars-list-table}%` tokens. Helper priority: Site helpers override plugin helpers, which override built-in helpers. All existing built-in helpers refactored to use same `args` interface for consistency. Works for sites (`site/webapp/controller/*.js`) and plugins (`plugins/*/webapp/controller/*.js`). Comprehensive test coverage (27 tests: 22 unit + 5 integration). Complete documentation with examples. See [Handlebars Documentation](docs/handlebars.md#custom-handlebars-helpers-v1317) and [Creating Plugins Guide](docs/plugins/creating-plugins.md#step-35-add-handlebars-helpers-optional-w-116). No breaking changes.
- âœ… **Version 1.3.16 - Handlebars Config Context Enhancements & Security**: Refactoring release improving handlebars context clarity and security. Renamed `config` context to `siteConfig` for better distinction from `appConfig` (breaking change, no backward compatibility needed). Added `user.hasRole.*` context object for role testing: `{{#if user.hasRole.root}}`. Implemented sensitive field filtering for `siteConfig` using schema metadata with `_meta.contextFilter` (following appConfig pattern). Enhanced wildcard pattern matching to support property name patterns (`smtp*`, `*pass`). Filters sensitive fields like SMTP credentials based on authentication status. Added `includeSchema` query parameter to config API (like user controller). Updated all documentation and examples (22 occurrences). Added 4 unit tests for context filtering. See [Handlebars Documentation](docs/handlebars.md). Breaking change: `{{config.*}}` â†’ `{{siteConfig.*}}`.
- âœ… **Version 1.3.15 - Handlebars Logical & Comparison Helpers with Subexpressions**: Feature release adding powerful logical and comparison helpers to Handlebars templating. New regular helpers: `{{and}}`, `{{or}}`, `{{not}}`, `{{eq}}`, `{{ne}}`, `{{gt}}`, `{{gte}}`, `{{lt}}`, `{{lte}}` returning "true"/"false" strings. New block helpers: `{{#and}}`, `{{#or}}`, `{{#not}}`, `{{#eq}}`, `{{#ne}}`, `{{#gt}}`, `{{#gte}}`, `{{#lt}}`, `{{#lte}}` with `{{else}}` support. Subexpression support in `{{#if}}` and `{{#unless}}` using Polish notation: `{{#if (and user.isAdmin (gt user.score 100))}}`. Enhanced `_parseAndEvaluateArguments()` with multi-phase parsing supporting quoted strings with parentheses (`"James (Jim)"`), nested subexpressions, and subexpressions in all helper arguments. Added `{{else}}` support to `{{#unless}}` blocks. Permissive type coercion (numeric strings â†’ numbers, lexicographical string comparison). Comprehensive test coverage (63 unit tests). Complete documentation with interactive examples. See [Handlebars Documentation](docs/handlebars.md) and [Live Examples](/jpulse-examples/handlebars.shtml). No breaking changes.
- âœ… **Version 1.3.14 - Metrics Bug Fixes & Enhancements**: Bug fix release addressing critical issues discovered after W-112 deployment. Fixed sanitization in aggregated components (preserve meta structure, handle both per-instance and aggregated structures). Fixed admin sanitization (use isAdmin parameter, check admin status separately from authorization). Fixed memory percentage calculation (use total system memory instead of heap size, preventing 255% display). Fixed aggregation logic (collect component names from ALL instances, components appear as soon as one instance has them). Added user document metrics (docsCreated24h, docsUpdated24h, docsDeleted24h) to UserController.getMetrics() by querying log collection. Fixed component sorting (sort by display name `component.component || componentName` instead of key in aggregation, _buildServersArray(), and _getCurrentInstanceHealthData()). All fixes ensure accurate metrics display, proper security, and better user experience. No breaking changes.
- âœ… **Version 1.3.13 - Standardized Component Metrics System & Navigation Enhancement**: Comprehensive metrics collection framework with standardized `getMetrics()` interface for all framework components. Features cluster-wide aggregation across multiple instances, time-based counters for activity tracking (last hour, last 24h, total), field-level metadata for visualization/aggregation/sanitization, and enhanced admin dashboard with component health monitoring. New `TimeBasedCounter` utility for in-memory event tracking with automatic cleanup. Components report metrics via `MetricsRegistry` for dynamic discovery. Database-backed stats marked as `global: true` for accurate cluster-wide aggregation. Sensitive fields automatically sanitized for non-admin users. Enhanced `/admin/system-status.shtml` with color-coded status indicators and flattened component display. Added `hideInDropdown` flag to navigation items, allowing items to appear in breadcrumbs but not in dropdown/hamburger menu (useful for detail pages requiring URL parameters). Removed obsolete `getHealthStatus()` methods. No breaking changes for applications.
- âœ… **Version 1.3.12 - Plugin Installation Bug Fixes**: Fixed critical bug where `npx jpulse plugin install` failed due to incorrect jPulse version detection. `getFrameworkVersion()` was reading dependency requirement (`^1.1.0`) instead of actual installed version (`1.3.11`). Now reads from `node_modules/@jpulse-net/jpulse-framework/package.json`. Also fixed `bump-version.js` to work for plugin projects by detecting plugin context via `plugin.json` and using `webapp/bump-version.conf`. Documentation updated for plugin version management. No breaking changes.
- âœ… **Version 1.3.11 - Toast Queue for Page Redirects**: New `jPulse.url.redirect(url, options)` utility for redirecting with queued toast messages. Messages stored in `jpulse_toast_queue` sessionStorage and displayed after page load. Features `options.delay` for timed redirects, `options.toasts` array for message queue, and `jPulse.url.isInternal(url)` to detect external URLs (clears queue to prevent orphaned messages). Toast API enhanced with link support: `{ toastType, message, link?, linkText?, duration? }`. Error toasts now default to 8 seconds. Plugin-defined toast styling (plugins specify `toastType`, removing hard-coded plugin checks from core). Login page updated to use instant redirect with deferred success toast for faster UX. See [UI Widgets Examples](/jpulse-examples/ui-widgets.shtml). No breaking changes.
- âœ… **Version 1.3.10 - Multi-Step Authentication & Hook Simplification**: Flexible hook-based multi-step login flow supporting MFA, email verification, OAuth2, LDAP, and more. Single `POST /api/1/auth/login` endpoint with server-controlled step chain. **Phase 8 Hook Simplification**: Reduced 24 hooks to 12 with intuitive `onBucketAction` naming convention (`onAuthBeforeLogin`, `onUserAfterSave`). Auth hooks (7): `onAuthBeforeLogin`, `onAuthBeforeSession`, `onAuthAfterLogin`, `onAuthFailure`, `onAuthGetSteps`, `onAuthValidateStep`, `onAuthGetWarnings`. User hooks (5): `onUserBeforeSave`, `onUserAfterSave`, `onUserBeforeDelete`, `onUserAfterDelete`, `onUserSyncProfile`. MFA policy enforcement auto-redirects to setup page when required. Login warnings displayed via sessionStorage across page redirects. See [Plugin Hooks Guide](docs/plugins/plugin-hooks.md). 924 unit tests passing. No breaking changes for applications; plugin developers update hook names.
- âœ… **Version 1.3.9 - Data-Driven User Profile Extensions**: Enables plugins to extend admin and user profile pages with data-driven cards. Enhanced `UserModel.extendSchema()` accepts `_meta` with `adminCard`/`userCard` configuration for automatic card rendering. Features field-level display attributes (`visible`, `readOnly`, `displayAs`, `showIf`), declarative actions (`setFields` for local form updates, `navigate` for redirects, `handler` for custom logic), and `jPulse.schemaHandlers` for complex operations. New `?includeSchema=1` API parameter returns schema metadata for client-side rendering. Username fallback for `/api/1/user/:id` (not just ObjectId). Complete documentation in `docs/plugins/plugin-api-reference.md`. No breaking changes.
- âœ… **Version 1.3.8 - Plugin CLI Management**: Complete command-line interface for plugin management with `npx jpulse plugin` commands. Features `list`/`info` for inspecting plugins, `install`/`update`/`remove` for package management with npm integration, `enable`/`disable` for controlling plugin state, and `publish` for npm distribution with automatic version synchronization. Supports shorthand package names (`auth-mfa` â†’ `@jpulse-net/plugin-auth-mfa`), two-step install process (npm fetch â†’ plugins/ sync), and air-gapped/private registry support. Complements existing Admin UI at `/admin/plugins`. Comprehensive documentation in `docs/plugins/managing-plugins.md` and `docs/plugins/publishing-plugins.md`. No breaking changes.
- âœ… **Version 1.3.7 - Cursor-Based Pagination for Search APIs**: Implemented efficient cursor-based pagination as default for `/api/1/user/search` and `/api/1/log/search` endpoints, with offset-based pagination as opt-in. Features stateless Base64-encoded cursors containing query state, automatic `_id` tiebreaker for consistent ordering, total count caching (countDocuments only on first request), `limit+1` fetch for hasMore detection, and `nextCursor`/`prevCursor` for bidirectional navigation. Added `jPulse.UI.pagination` client-side helper for reusable pagination state management with `createState()`, `resetState()`, `updateState()`, `formatRange()`, `updateButtons()`, and `setupButtons()` methods. New `/api/1/user/stats` endpoint provides efficient MongoDB aggregation-based statistics (total, byStatus, byRole, admins, recentLogins) replacing expensive client-side calculation. Admin views (`users.shtml`, `logs.shtml`) updated with cursor navigation and "Results per page" selectors. API parameters standardized: `limit`, `offset`, `sort`, `cursor` (removed `skip`, `page`). Comprehensive test coverage with 37 unit tests. No breaking changes - cursor mode is default but offset mode works when `offset` param present.
- âœ… **Version 1.3.6 - Plugin Hooks for Authentication & User Management**: Introduced comprehensive plugin hook system enabling third-party authentication providers (OAuth2, LDAP, MFA) and user lifecycle extensions. Features HookManager utility with 24 hooks (13 auth + 11 user), auto-registration via static `hooks` object declaration, priority-based execution order (lower = earlier, default 100), context modification and cancellation support, and `%DYNAMIC{plugins-hooks-list-table}%` for auto-documentation. Hook naming uses camelCase with Hook suffix (`authBeforeLoginHook`, `userAfterCreateHook`). Simple declaration format: `static hooks = { hookName: { priority? } }` with method name matching hook name. Auth hooks cover login flow (beforeLogin, afterPasswordValidation, beforeSessionCreate, afterLoginSuccess, onLoginFailure), logout flow (beforeLogout, afterLogout), and MFA (requireMfa, validateMfa, onMfaSuccess, onMfaFailure). User hooks cover signup (beforeSignup, afterSignupValidation, beforeCreate, afterCreate, onSignupComplete) and persistence (beforeSave, afterSave, beforeDelete, afterDelete, mapExternalProfile, syncExternalProfile). Hello-world plugin updated with working hook examples. Comprehensive documentation in `docs/plugins/plugin-hooks.md`. 26 new unit tests. No breaking changes.
- âœ… **Version 1.3.5 - Dynamic Markdown Content**: Introduced `%DYNAMIC{generator-name key="value"}%` tokens for server-generated content in markdown documentation. Features secure generator registry (only whitelisted generators callable), automatic parameter parsing with type coercion (strings, numbers, booleans), backtick escaping for documenting tokens, and post-cache processing for fresh data. Ships with 4 generators: `plugins-list-table` (markdown table), `plugins-list` (bullet list), `plugins-count` (count with filtering), `dynamic-generator-list` (self-documenting). Added `jPulse.UI.docs` API for creating documentation viewers with SPA navigation, automatic namespace detection, and site nav integration. Features `init()`, `getViewer()`, `convertFilesToPages()` methods. Updated SPA detection to recognize docs viewers. Added `titleCaseFix` configuration for automatic title corrections (API, HTML, CSS, etc.) with site override support. Created comprehensive `docs/markdown-docs.md` documentation guide. 20 unit tests added for token parsing and processing.
- âœ… **Version 1.3.4 - Custom Template Variables**: Introduced safe custom variables with `{{let key="value"}}` for template-scoped variables, `{{#let key="value"}}...{{/let}}` for block-scoped variables with scope isolation, and `{{#with object}}` for context switching. All custom variables stored in protected `vars` namespace preventing system variable conflicts. Features nested property support (`{{let config.theme="dark"}}`), type support (strings, numbers, booleans), scope inheritance, and pollution prevention in loops. Comprehensive test coverage with 33/33 unit tests passing. Updated 4 documentation guides with live examples. Benefits: safety (cannot override system vars), clarity (self-documenting `{{vars.*}}`), flexibility (template-scoped or block-scoped), and maintainability (easy debugging with namespace separation). No breaking changes.
- âœ… **Version 1.3.3 - Unified Component System**: Replaced extract:start/end markers with intuitive `{{#component}}` syntax for reusable content blocks. New `{{file.includeComponents}}` helper silently registers components from multiple files for dashboard aggregation. Components now available as context variables (`{{components.namespace.name}}`), accessible like `{{user.*}}` or `{{siteConfig.*}}`. Features pattern filtering (`component="adminCards.*"`), flexible sorting (component-order, plugin-order, filename), circular reference detection, and `_inline` parameter for JavaScript embedding. Migrated all 16 framework dashboards (admin, examples, plugins) and 8 site/plugin views to new syntax. Removed ~210 lines of deprecated extract code. Enhanced component call handling with proper error messages, context propagation, and parameter expansion. Updated comprehensive documentation across 4 guides. All 919 tests passing (813 unit + 100 integration + CLI tools). Benefits: "don't make me think" syntax, clean Handlebars with proper highlighting, no more `<div style="display: none;">` wrappers, explicit sorting control.
- âœ… **Version 1.3.2 - Additional Plugin Infrastructure Bug Fixes**: Patch release fixing four critical bugs discovered during v1.3.1 production deployment. Fixed update script missing plugin sync (sites had stale plugins after framework update). Removed confusing "enabled" config field that didn't actually enable/disable plugins. Fixed wrong documentation symlink location with context-aware detection (framework repo uses `docs/`, site uses `webapp/static/assets/jpulse-docs/`). Fixed stale plugin state in admin UI after enable/disable (now updates immediately without restart). All 926 tests passing. Files modified: 4 code fixes, 4 documentation updates. Ensures plugin updates work correctly, eliminates UX confusion, and maintains consistency across framework development and site installations. No breaking changes.
- âœ… **Version 1.3.1 - Critical Bug Fixes for Plugin Infrastructure**: Patch release fixing three critical bugs discovered after v1.3.0 deployment. Fixed npm package missing `plugins/hello-world/` directory (added explicit `files` field to package.json). Fixed GitHub Actions CI test crashes when database unavailable (added `isTest` parameter to PluginModel.ensureIndexes()). Fixed JavaScript syntax errors when i18n strings contain apostrophes - converted 160+ instances to template literals (backticks) across 15 view files, established `%TOKEN%` pattern for dynamic error messages, added comprehensive "Using i18n in JavaScript Context" best practices section to documentation. All 926 tests passing. Ensures complete npm package, reliable CI/CD testing, and safe internationalization with natural language. No breaking changes.
- âœ… **Version 1.3.0 - Plugin Infrastructure with Auto-Discovery**: Comprehensive plugin system enabling third-party extensions with zero-configuration auto-discovery. Features complete MVC support (controllers, models, views, static assets, documentation), dynamic configuration management with JSON schema validation, admin UI for plugin management, plugin-aware path resolution (site > plugins > framework), automatic symlink management, and ships with `hello-world` demo plugin. Includes robust security (path traversal protection, HTML sanitization for plugin descriptions and email content, DB operation validation), complete i18n (English & German), request timing, and comprehensive testing (913 tests passing). Five comprehensive documentation guides for plugin development. Technical debt documented with 19 items for future enhancements. No breaking changes.
- âœ… **Version 1.2.6 - Bug Fixes for Site Installation and Navigation**: Critical bug fix release addressing issues discovered after v1.2.5 deployment. Fixed incomplete hello example copying during site installation (now copies all 5 controllers, 1 model, and recursive view directories with templates). Implemented robust navigation null handling with `_sanitizeNavStructure()` method to safely remove deletion markers at init time, preventing "Cannot read properties of null" errors. Removed obsolete `checkAdminAccess()` call. All 893 tests passing.
- âœ… **Version 1.2.5 - Site Navigation Override with Append Mode**: Introduced flexible navigation customization using append mode file concatenation and direct JavaScript mutation. Sites can selectively add, modify, or delete navigation sections without duplicating entire framework files. Features `.js` and `.css` append mode (concatenate framework + site), unified `window.jPulseNavigation` structure, direct mutation pattern (`window.jPulseNavigation.site.foo = {...}`), Handlebars comment support (`{{!-- --}}`), and file naming standardization (`site-common.*` â†’ `jpulse-common.*`). Benefits: zero runtime overhead, automatic framework updates, idiomatic JavaScript, minimal customization code. Breaking change: navigation file migration required. Complete documentation in site-navigation.md guide.
- âœ… **Version 1.2.4 - Reusable Handlebars Components**: Introduced reusable component system to eliminate code duplication. Define components once with `{{#component "name" param="default"}}...{{/component}}`, use everywhere with `{{use.componentName param="value"}}`. Features automatic kebab-case to camelCase conversion, per-request component registry, circular reference detection, optional dot-notation namespaces (`jpIcons.configSvg`), and `_inline=true` parameter for JavaScript embedding. Created centralized `svg-icons.tmpl` library with 20+ parameterized SVG components. Migrated all framework icons to component system. Benefits: define once use everywhere, clean templates, maintainable icons, organized namespaces. No breaking changes - new opt-in feature with comprehensive documentation.
- âœ… **Version 1.2.3 - Professional SVG Icons**: Replaced Unicode emoji icons with professional SVG icons from lucide.dev across admin dashboard and hello demo pages. Improves visual consistency with enterprise-ready appearance and theme-flexible design using CSS `currentColor`. Added vertical alignment CSS (`h1-h6 svg { vertical-align: middle; }`) for proper icon positioning. Inline SVG implementation enables proper color inheritance from parent containers. Theme-ready icons respond to CSS color changes. No breaking changes - visual enhancement only.
- âœ… **Version 1.2.2 - Removed jsdom Dependency**: Replaced 15-20MB jsdom package (90+ sub-dependencies) with lightweight regex-based CSS selector extraction (~50 lines of code). Uses smart tag nesting level annotation (`:~0~`, `:~1~`) with backreference matching to handle nested tags correctly. Moved jsdom to devDependencies (still used for client-side JS tests). Significantly reduces production package size, faster installs, same functionality. CSS selector extraction (`.class`, `#id`) works identically with zero external dependencies.
- âœ… **Version 1.2.1 - File Listing & Extraction Helpers**: Generalized Handlebars helpers for automated content generation. Features `file.list` for glob pattern file discovery and `file.extract` for content extraction using three methods (comment markers, regex patterns, CSS selectors). Supports sorting by extracted order or filename, pattern parameter passing in loops, and site override via PathResolver. Security built-in with path traversal protection. Use cases include auto-populated dashboards, navigation menus, galleries, and documentation indexes. Added `PathResolver.listFiles()` method for centralized directory listing with site override support.
- âœ… **Version 1.2.0 - Admin User Management & API Consolidation**: Complete admin user management system with flexible user identification (ObjectId, username, session), comprehensive validation (last admin protection, role safeguards), schema extension architecture for plugin support, and unified API surface. Breaking changes: removed `/api/1/user/profile` endpoints, replaced with unified `/api/1/user` and `/api/1/user/:id`. New `/api/1/user/enums` endpoint for dynamic enum retrieval. Centralized admin roles configuration via `appConfig.user.adminRoles`. Runtime schema extension via `UserModel.extendSchema()` for future plugins.
- âœ… **Version 1.1.8 - Simplified Installation & Bug Fixes**: Added `jpulse-install` npm package for one-command installation. No more manual `.npmrc` creation - just run `npx jpulse-install` and you're ready to configure your site. Eliminates the "chicken and egg" problem of installing from GitHub Packages. Fixed log symlink creation (only for file logging), SSL paths in nginx config, PORT value preservation, and log directory defaults. Renamed `npx jpulse install` â†’ `npx jpulse setup` for clarity. Manual installation method still available in docs.
- âœ… **Version 1.1.7 - Deployment Bug Fixes**: Fixed seven bugs affecting site deployment and configuration, improving the "don't make me think" installation experience. Simplified npm installation with `--registry` flag (no manual .npmrc creation). Fixed log directory symlinks, MongoDB setup auto-loads `.env` file, handles existing authentication for multi-site installs. Auto-configures Let's Encrypt SSL paths. Nginx uses site-specific upstream names enabling seamless multi-site installations on same server.
- âœ… **Version 1.1.6 - Configurable Navigation Delays**: Restructured `view.pageDecoration` configuration with nested structure for better site overrides. Made site navigation menu open/close delays fully configurable via `app.conf` (openDelay, closeDelay, submenuCloseDelay). Open delay cancels if mouse leaves before menu opens, preventing accidental triggers. Site administrators can now fine-tune menu timing for their specific UX needs.
- âœ… **Version 1.1.5 - Log IP addresses**: Fix bug where local IP address 127.0.0.1 was shown in the logs when jPulse is behind a reverse proxy.
- âœ… **Version 1.1.4 - Email Sending Strategy**: Implemented standardized email sending capability for jPulse Framework and site applications. EmailController provides server-side utility methods (sendEmail, sendEmailFromTemplate, sendAdminNotification) and client-side API endpoint (POST /api/1/email/send). MongoDB-based configuration enables per-instance SMTP settings with support for all major providers (Gmail, SendGrid, AWS SES, Office 365, Mailgun). Features test email functionality in admin UI, health monitoring integration, Handlebars template support, and graceful fallback when email not configured. Complete documentation and comprehensive test coverage.
- âœ… **Version 1.1.3 - Handlebars Processing Extraction**: Extracted Handlebars template processing to dedicated `HandlebarController` for better separation of concerns and reusable template processing API. Added `POST /api/1/handlebar/expand` endpoint for client-side Handlebars expansion with server context. Added `/api/1/config/_default` endpoint for default configuration management. Context filtering based on authentication status protects sensitive configuration data. Event-driven config refresh via Redis broadcast ensures multi-instance cache consistency. Enables future email template processing and "Try Your Own Handlebars" demo functionality.
- âœ… **Version 1.1.0 - Unified CLI tools with intuitive npx jpulse commands**: Unified command-line interface with single entry point, configuration-driven version bumping, and intuitive update workflow following "don't make me think" philosophy
- âœ… **Version 1.0.1 - Documentation & Developer Experience**: Framework comparison guide comparing jPulse with NestJS, Django, Rails, Laravel, Next.js, and alternatives. Automated `.npmrc` creation for GitHub Packages registry - no manual configuration needed. Enhanced developer experience following "don't make me think" philosophy.
- âœ… **Version 1.0.0 - Production Milestone**: Complete Redis infrastructure for scalable multi-instance and multi-server deployments with zero-configuration auto-discovery, Application Cluster Broadcasting, WebSocket real-time communication, aggregated health metrics, Redis-based session sharing, and enterprise-grade clustering. Includes BSL 1.1 licensing, repository migration to jpulse-net organization, comprehensive Gen-AI development guides, and production-ready deployment automation.

## Community & Support

- **Documentation**: Complete guides in `/docs/` directory
- **GitHub**: Issues, discussions, and contributions welcome
- **License**: BSL 1.1 (with commercial licensing available)
- **Roadmap**: [Development roadmap](docs/dev/roadmap.md) with clear milestones

## Enterprise Advantages

- **Stability**: Backward-compatible updates with clear migration paths
- **Security**: Built-in security best practices and regular audits
- **Scalability**: Horizontal scaling with session clustering and database sharding
- **Maintainability**: Clean architecture with comprehensive documentation
- **Cost-Effective**: Open source with optional enterprise support

## Licensing

jPulse Framework uses **Business Source License 1.1 (BSL 1.1)**:

- **Free for**: Evaluation, development, testing, and learning
- **Source Code**: Fully accessible at [GitHub](https://github.com/jpulse-net/jpulse-framework)
- **Production Use**: Requires commercial license (contact [team@jpulse.net](mailto:team@jpulse.net))
- **Future**: Automatically converts to AGPL v3.0 on **2030-01-01**

**Quick Guide:**
- âœ… **Development/testing**: Free (BSL 1.1)
- âŒ **Production/SaaS**: Commercial license required

For detailed licensing information, see [License Documentation](docs/license.md).

---

**Ready to build enterprise-grade applications without the complexity?**

[Get Started](docs/getting-started.md) | [View Examples](docs/examples.md) | [Read Documentation](docs/README.md)

*jPulse Framework - Powerful simplicity for enterprise applications*
