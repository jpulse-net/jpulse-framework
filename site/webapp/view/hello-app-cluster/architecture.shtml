<!DOCTYPE html>
<!--
 * @name            jPulse Framework / Site / WebApp / View / Hello App Cluster / Architecture
 * @tagline         App Clustering Architecture Documentation
 * @description     Comprehensive architecture overview for multi-server application clustering
 * @file            site/webapp/view/hello-app-cluster/architecture.shtml
 * @version         1.4.7
 * @release         2026-01-07
 * @repository      https://github.com/jpulse-net/jpulse-framework
 * @author          Peter Thoeny, https://twiki.org & https://github.com/peterthoeny/
 * @copyright       2025 Peter Thoeny, https://twiki.org & https://github.com/peterthoeny/
 * @license         BSL 1.1 -- see LICENSE file; for commercial use: team@jpulse.net
 * @genai           60%, Cursor 1.7, Claude Sonnet 4
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Architecture - App Cluster Demo - {{app.site.shortName}}</title>
    {{file.include "jpulse-header.tmpl"}}
    <style>
        .local-diagram {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
            font-family: monospace;
            font-size: 12px;
            line-height: 1.3;
            overflow-x: auto;
        }

        .local-component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .local-component-card {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            transition: all 0.2s ease;
        }

        .local-component-card:hover {
            border-color: #007bff;
            box-shadow: 0 4px 12px rgba(0,123,255,0.1);
        }

        .local-component-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .local-component-icon {
            font-size: 24px;
        }

        .local-component-title {
            font-size: 16px;
            font-weight: bold;
            margin: 0;
        }

        .local-component-description {
            font-size: 14px;
            color: #6c757d;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .local-component-features {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .local-component-features li {
            padding: 4px 0;
            font-size: 14px;
            color: #495057;
        }

        .local-component-features li::before {
            content: "âœ“";
            color: #28a745;
            font-weight: bold;
            margin-right: 8px;
        }

        .local-flow-diagram {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            position: relative;
        }

        .local-flow-step {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }

        .local-flow-step:last-child {
            margin-bottom: 0;
        }

        .local-step-number {
            background: #007bff;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .local-step-content {
            flex: 1;
        }

        .local-step-title {
            font-weight: bold;
            margin: 0 0 5px 0;
        }

        .local-step-description {
            margin: 0;
            color: #6c757d;
            font-size: 14px;
        }

        .local-comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 14px;
        }

        .local-comparison-table th,
        .local-comparison-table td {
            text-align: left;
            padding: 5px 15px;
            border-bottom: 1px solid #e9ecef;
            vertical-align: top;
        }

        .local-comparison-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #495057;
        }

        .local-comparison-table tr:hover {
            background-color: #f8f9fa;
        }

        .local-pros-cons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .local-pros-cons {
                grid-template-columns: 1fr;
            }
        }

        .local-pros,
        .local-cons {
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }

        .local-pros {
            background-color: #d4edda;
            border-color: #c3e6cb;
        }

        .local-cons {
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }

        .local-pros h4 {
            color: #155724;
            margin-top: 0;
        }

        .local-cons h4 {
            color: #721c24;
            margin-top: 0;
        }

        .local-pros ul,
        .local-cons ul {
            margin: 10px 0;
            padding-left: 20px;
        }

        .local-highlight-box {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border: 1px solid #90caf9;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .local-highlight-box h4 {
            color: #0d47a1;
            margin-top: 0;
        }

        .local-code-snippet {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="jp-main">
        <div class="jp-container-1200">
            <div class="jp-page-header">
                <h1>ğŸ—ï¸ Architecture</h1>
                <span class="jp-subtitle">Comprehensive overview of jPulse Framework's multi-server clustering architecture</span>
            </div>

            <!-- Sub-navigation -->
            <nav class="jp-btn-nav-group">
                <a href="/hello-app-cluster/" class="jp-btn jp-btn-outline">ğŸ“– Overview</a>
                <span class="jp-btn-nav-arrow">â†’</span>
                <a href="/hello-app-cluster/notifications.shtml" class="jp-btn jp-btn-outline">ğŸ“¢ Global Notifications</a>
                <span class="jp-btn-nav-arrow">â†’</span>
                <a href="/hello-app-cluster/collaborative-todo.shtml" class="jp-btn jp-btn-outline">âœ… Collaborative To-Do</a>
                <span class="jp-btn-nav-arrow">â†’</span>
                <a href="/hello-app-cluster/code-examples.shtml" class="jp-btn jp-btn-outline">ğŸ’» Code Examples</a>
                <span class="jp-btn-nav-arrow">â†’</span>
                <a href="/hello-app-cluster/architecture.shtml" class="jp-btn jp-btn-outline jp-btn-active">ğŸ—ï¸ Architecture</a>
            </nav>

            <!-- System Overview -->
            <div class="jp-card">
                <h2 class="jp-card-dialog-heading">ğŸŒ System Overview</h2>
                <div class="jp-card-subheading">High-level architecture of jPulse Framework clustering</div>
                <div class="local-diagram">
<pre>
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                        jPulse Framework Cluster Architecture                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Browser   â”‚    â”‚   Browser   â”‚    â”‚   Browser   â”‚
                    â”‚   (View)    â”‚    â”‚   (View)    â”‚    â”‚   (View)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚                  â”‚                  â”‚
                           â”‚ HTTP/WebSocket   â”‚ HTTP/WebSocket   â”‚ HTTP/WebSocket
                           â”‚                  â”‚                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                    â”‚   jPulse    â”‚    â”‚   jPulse    â”‚    â”‚   jPulse    â”‚
                    â”‚  Server 1   â”‚    â”‚  Server 2   â”‚    â”‚  Server 3   â”‚
                    â”‚   (Model,   â”‚    â”‚   (Model,   â”‚    â”‚   (Model,   â”‚
                    â”‚ Controller) â”‚    â”‚ Controller) â”‚    â”‚ Controller) â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚                  â”‚                  â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚                   â”‚
                                    â”‚   Redis Cluster   â”‚
                                    â”‚   (Pub/Sub +      â”‚
                                    â”‚    Sessions)      â”‚
                                    â”‚                   â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚                   â”‚
                                    â”‚   MongoDB         â”‚
                                    â”‚   (Shared Data)   â”‚
                                    â”‚                   â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>
                </div>

                <div class="local-highlight-box">
                    <h4>ğŸ¯ Key Design Principles</h4>
                    <ul>
                        <li><strong>Horizontal Scalability:</strong> Add more server instances as needed</li>
                        <li><strong>Graceful Fallback:</strong> Works with or without Redis clustering</li>
                        <li><strong>Real-time Sync:</strong> Instant data synchronization across all instances</li>
                        <li><strong>Session Sharing:</strong> Users can switch between any server instance</li>
                        <li><strong>Separation of Concerns:</strong> Clear boundaries between layers and components</li>
                    </ul>
                </div>
            </div>

            <!-- Getting Started Examples -->
            <div class="jp-card">
                <h2 class="jp-card-dialog-heading">ğŸš€ Getting Started Examples</h2>
                <div class="jp-card-subheading">Minimal code examples to get you started quickly</div>

                <h3>ğŸ“¢ Simple Notification Broadcasting</h3>
                <div class="jp-source-code" data-lang="javascript" data-show-lang="true">
                    <pre><code class="language-javascript">// In your view template - just add this to send notifications
jPulse.appCluster.broadcast.publish('view:alerts:system', {
    message: 'System maintenance scheduled',
    type: 'warning'
});

// Listen for notifications from other instances
jPulse.appCluster.broadcast.subscribe('view:alerts:system', (data) => {
    jPulse.UI.toast.show(data.message, data.type);
});</code></pre>
                </div>

                <h3>âœ… Collaborative Data Updates</h3>
                <div class="jp-source-code" data-lang="javascript" data-show-lang="true">
                    <pre><code class="language-javascript">// In your controller - handle the API request
static async apiCreate(req, res) {
    const todo = await TodoModel.create(req.body);
    await this._broadcastChange('created', todo, req);
    res.json({ success: true, todo });
}

// In your view - listen for updates (use view: prefix for client subscriptions)
jPulse.appCluster.broadcast.subscribe('view:todo:list:changed', (data) => {
    refreshTodoList(data); // Update your UI with the new data
}, { omitSelf: true });  // Don't receive your own broadcasts</code></pre>
                </div>

                <div class="local-highlight-box">
                    <h4>ğŸ’¡ Pro Tip</h4>
                    <p>Start with the <strong>Global Notifications</strong> demo to understand the basics, then move to <strong>Collaborative To-Do</strong> for production patterns. Both work out of the box!</p>
                </div>
            </div>

            <!-- Core Components -->
            <div class="jp-card">
                <h2 class="jp-card-dialog-heading">ğŸ§© Core Components</h2>
                <div class="jp-card-subheading">Essential building blocks of the clustering system</div>
                <div class="local-component-grid">
                    <!-- Redis Manager -->
                    <div class="local-component-card">
                        <div class="local-component-header">
                            <div class="local-component-icon">ğŸ”—</div>
                            <h3 class="local-component-title">RedisManager</h3>
                        </div>
                        <p class="local-component-description">
                            Central Redis connection and pub/sub management.
                        </p>
                        <ul class="local-component-features">
                            <li>Connection pooling &amp; health monitoring</li>
                            <li>Low-level publish/subscribe interface</li>
                            <li>Handles server-to-server communication</li>
                            <li>Graceful fallback when Redis unavailable</li>
                            <li>Manages callback registry for broadcasts</li>
                        </ul>
                    </div>

                    <!-- AppCluster Controller -->
                    <div class="local-component-card">
                        <div class="local-component-header">
                            <div class="local-component-icon">ğŸ”Œ</div>
                            <h3 class="local-component-title">AppClusterController</h3>
                        </div>
                        <p class="local-component-description">
                            The WebSocket-to-Redis bridge for real-time client updates.
                        </p>
                        <ul class="local-component-features">
                            <li>Manages the `/api/1/ws/app-cluster` namespace</li>
                            <li>Tracks client channel subscriptions</li>
                            <li>Subscribes to Redis broadcast patterns</li>
                            <li>Relays Redis messages to interested clients</li>
                            <li>Enables server-initiated updates to the UI</li>
                        </ul>
                    </div>

                    <!-- Broadcast Controller -->
                    <div class="local-component-card">
                        <div class="local-component-header">
                            <div class="local-component-icon">ğŸ“¡</div>
                            <h3 class="local-component-title">BroadcastController</h3>
                        </div>
                        <p class="local-component-description">
                            Provides a REST API endpoint for client-initiated broadcasts.
                        </p>
                        <ul class="local-component-features">
                            <li>Exposes `POST /api/1/broadcast/:channel`</li>
                            <li>Enforces channel naming conventions</li>
                            <li>Validates incoming client messages</li>
                            <li>Publishes client messages to Redis</li>
                            <li>Secures the client-to-server broadcast path</li>
                        </ul>
                    </div>

                    <!-- Session Store -->
                    <div class="local-component-card">
                        <div class="local-component-header">
                            <div class="local-component-icon">ğŸ”</div>
                            <h3 class="local-component-title">Session Store</h3>
                        </div>
                        <p class="local-component-description">
                            Shared session management across cluster instances
                        </p>
                        <ul class="local-component-features">
                            <li>Redis-backed session sharing</li>
                            <li>Memory fallback for single-server mode</li>
                            <li>Automatic session synchronization</li>
                            <li>Configurable TTL and cleanup</li>
                            <li>User authentication state sharing</li>
                        </ul>
                    </div>

                    <!-- Health Controller -->
                    <div class="local-component-card">
                        <div class="local-component-header">
                            <div class="local-component-icon">â¤ï¸</div>
                            <h3 class="local-component-title">HealthController</h3>
                        </div>
                        <p class="local-component-description">
                            Cluster health monitoring and metrics collection
                        </p>
                        <ul class="local-component-features">
                            <li>Instance health reporting</li>
                            <li>Redis connectivity monitoring</li>
                            <li>Performance metrics collection</li>
                            <li>Cluster topology discovery</li>
                            <li>Load balancer health checks</li>
                        </ul>
                    </div>

                    <!-- Bootstrap -->
                    <div class="local-component-card">
                        <div class="local-component-header">
                            <div class="local-component-icon">ğŸš€</div>
                            <h3 class="local-component-title">Bootstrap</h3>
                        </div>
                        <p class="local-component-description">
                            Application initialization and component orchestration
                        </p>
                        <ul class="local-component-features">
                            <li>Dependency injection setup</li>
                            <li>Component initialization order</li>
                            <li>Configuration loading & validation</li>
                            <li>Error handling during startup</li>
                            <li>Test environment support</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Quick Start Guide -->
            <div class="jp-card">
                <h2 class="jp-card-dialog-heading">ğŸ¯ Quick Start Guide</h2>
                <div class="jp-card-subheading">Choose the right pattern for your use case</div>

                <div class="local-highlight-box">
                    <h4>ğŸš€ For Beginners & Simple Cases</h4>
                    <p><strong>Use Client-Side Broadcasting if you need:</strong></p>
                    <ul>
                        <li>Simple notifications or alerts</li>
                        <li>Real-time chat or messaging</li>
                        <li>Live updates without data persistence</li>
                        <li>Quick prototyping</li>
                    </ul>
                    <p><a href="/hello-app-cluster/notifications.shtml" class="jp-btn jp-btn-primary">Try Global Notifications</a></p>
                </div>

                <div class="local-highlight-box">
                    <h4>ğŸ—ï¸ For Production Applications</h4>
                    <p><strong>Use Server-Side Broadcasting if you need:</strong></p>
                    <ul>
                        <li>Data validation and security</li>
                        <li>Database persistence</li>
                        <li>Audit trails and logging</li>
                        <li>Complex business logic</li>
                        <li>Enterprise-grade reliability</li>
                    </ul>
                    <p><a href="/hello-app-cluster/collaborative-todo.shtml" class="jp-btn jp-btn-primary">Try Collaborative To-Do</a></p>
                </div>
            </div>

            <!-- Broadcasting Patterns -->
            <div class="jp-card">
                <h2 class="jp-card-dialog-heading">ğŸ”„ Broadcasting Patterns</h2>
                <div class="jp-card-subheading">Two complementary approaches to cluster communication</div>

                <!-- Client-Side Pattern -->
                <h3>ğŸ“¢ Client-Side Broadcasting Pattern</h3>
                <div class="local-flow-diagram">
                    <div class="local-flow-step">
                        <div class="local-step-number">1</div>
                        <div class="local-step-content">
                            <div class="local-step-title">Client Action</div>
                            <div class="local-step-description">User performs action in browser (e.g., sends a notification).</div>
                        </div>
                    </div>

                    <div class="local-flow-step">
                        <div class="local-step-number">2</div>
                        <div class="local-step-content">
                            <div class="local-step-title">API Request</div>
                            <div class="local-step-description">JavaScript calls <code>jPulse.appCluster.broadcast.publish()</code>, which sends a POST request to <code>/api/1/broadcast/:channel</code>.</div>
                        </div>
                    </div>

                    <div class="local-flow-step">
                        <div class="local-step-number">3</div>
                        <div class="local-step-content">
                            <div class="local-step-title">Server Publishes to Redis</div>
                            <div class="local-step-description">The <code>BroadcastController</code> on the receiving server instance validates the request and publishes the message to the Redis pub/sub channel.</div>
                        </div>
                    </div>

                    <div class="local-flow-step">
                        <div class="local-step-number">4</div>
                        <div class="local-step-content">
                            <div class="local-step-title">Cluster Sync &amp; Client Push</div>
                            <div class="local-step-description">All server instances (via their <code>AppClusterController</code>) receive the message from Redis and push it to their connected WebSocket clients.</div>
                        </div>
                    </div>
                </div>

                <!-- Server-Side Pattern -->
                <h3>âœ… Server-Side Broadcasting Pattern</h3>
                <div class="local-flow-diagram">
                    <div class="local-flow-step">
                        <div class="local-step-number">1</div>
                        <div class="local-step-content">
                            <div class="local-step-title">API Request</div>
                            <div class="local-step-description">Client sends HTTP request to controller endpoint</div>
                        </div>
                    </div>

                    <div class="local-flow-step">
                        <div class="local-step-number">2</div>
                        <div class="local-step-content">
                            <div class="local-step-title">Server Processing</div>
                            <div class="local-step-description">Controller validates, processes business logic, saves to database</div>
                        </div>
                    </div>

                    <div class="local-flow-step">
                        <div class="local-step-number">3</div>
                        <div class="local-step-content">
                            <div class="local-step-title">Server Broadcast</div>
                            <div class="local-step-description">Controller publishes change notification to Redis</div>
                        </div>
                    </div>

                    <div class="local-flow-step">
                        <div class="local-step-number">4</div>
                        <div class="local-step-content">
                            <div class="local-step-title">Cluster Sync</div>
                            <div class="local-step-description">All server instances receive broadcast and notify their connected clients</div>
                        </div>
                    </div>
                </div>

                <!-- Pattern Comparison -->
                <h3>âš–ï¸ Pattern Comparison</h3>
                <table class="local-comparison-table">
                    <thead>
                        <tr>
                            <th>Aspect</th>
                            <th>Client-Side Broadcasting</th>
                            <th>Server-Side Broadcasting</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Complexity</strong></td>
                            <td>Simple, minimal code</td>
                            <td>Full MVC implementation</td>
                        </tr>
                        <tr>
                            <td><strong>Validation</strong></td>
                            <td>Client-side only</td>
                            <td>Server-side validation</td>
                        </tr>
                        <tr>
                            <td><strong>Persistence</strong></td>
                            <td>None (ephemeral messages)</td>
                            <td>Database storage</td>
                        </tr>
                        <tr>
                            <td><strong>Security</strong></td>
                            <td>Limited (client-controlled)</td>
                            <td>Full server-side security</td>
                        </tr>
                        <tr>
                            <td><strong>Audit Trail</strong></td>
                            <td>None</td>
                            <td>Complete logging</td>
                        </tr>
                        <tr>
                            <td><strong>Use Cases</strong></td>
                            <td>Notifications, chat, alerts</td>
                            <td>Data operations, workflows</td>
                        </tr>
                        <tr>
                            <td><strong>Performance</strong></td>
                            <td>Very fast (direct Redis)</td>
                            <td>Moderate (full processing)</td>
                        </tr>
                        <tr>
                            <td><strong>Reliability</strong></td>
                            <td>Best effort delivery</td>
                            <td>Transactional consistency</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Channel Naming Convention -->
            <div class="jp-card">
                <h2 class="jp-card-dialog-heading">ğŸ·ï¸ Channel Naming Convention</h2>
                <div class="jp-card-subheading">Structured approach to broadcast channel organization</div>
                <div class="local-highlight-box">
                    <h4>ğŸ“‹ Standard Pattern: {layer}:{component}:{domain}:{action}</h4>
                    <p>This four-part naming convention ensures clear, collision-free channel names that are easy to understand and maintain.</p>
                </div>

                <h3>ğŸ” Pattern Breakdown</h3>
                <table class="local-comparison-table">
                    <thead>
                        <tr>
                            <th>Part</th>
                            <th>Description</th>
                            <th>Examples</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>layer</strong></td>
                            <td>MVC layer initiating the broadcast</td>
                            <td><code>controller</code>, <code>view</code>, <code>model</code></td>
                        </tr>
                        <tr>
                            <td><strong>component</strong></td>
                            <td>Specific component or feature name</td>
                            <td><code>helloCluster</code>, <code>userProfile</code>, <code>orderSystem</code></td>
                        </tr>
                        <tr>
                            <td><strong>domain</strong></td>
                            <td>Data domain or entity type</td>
                            <td><code>notification</code>, <code>todo</code>, <code>user</code>, <code>payment</code></td>
                        </tr>
                        <tr>
                            <td><strong>action</strong></td>
                            <td>Action or event that occurred</td>
                            <td><code>created</code>, <code>updated</code>, <code>deleted</code>, <code>sent</code></td>
                        </tr>
                    </tbody>
                </table>

                <h3>âœ… Good Examples</h3>
                <div class="local-code-snippet">
<pre>
// Framework internal channels (server-to-server only)
controller:view:config:refresh
controller:health:metrics:broadcast

// Application channels (client-facing, use view: prefix)
view:helloNotification:message:sent
view:helloClusterTodo:list:changed
view:helloClusterTodo:item:updated

// Real-world examples
view:orderSystem:payment:completed
view:userProfile:avatar:updated
view:dashboard:metrics:refreshed
controller:inventory:stock:depleted  // Server-to-server only
</pre>
                </div>

                <h3>âŒ Avoid These Patterns</h3>
                <div class="local-code-snippet">
<pre>
// Too generic
notifications
user-update
data-change

// Inconsistent naming
myApp:something
user_profile_update
NotificationSent

// Missing layer information
todo:created
payment:completed
</pre>
                </div>
            </div>

            <!-- Configuration & Deployment -->
            <div class="jp-card">
                <h2 class="jp-card-dialog-heading">âš™ï¸ Configuration & Deployment</h2>
                <div class="jp-card-subheading">Setting up clustering in different environments</div>

                <h3>ğŸ”§ Redis Configuration</h3>
                <div class="local-code-snippet">
<pre>
// app.conf - Redis clustering configuration
{
  "redis": {
    "enabled": true,
    "host": "localhost",
    "port": 6379,
    "password": "",
    "db": 0,
    "keyPrefix": "jpulse:",
    "sessionTtl": 86400,
    "maxRetries": 3,
    "retryDelayOnFailover": 100,
    "enableOfflineQueue": false
  }
}
</pre>
                </div>

                <h3>ğŸ³ Docker Deployment Example</h3>
                <div class="local-code-snippet">
<pre>
# docker-compose.yml - Multi-instance deployment
version: '3.8'
services:
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    command: redis-server --appendonly yes
    volumes:
      - redis_data:/data

  mongodb:
    image: mongo:7
    ports:
      - "27017:27017"
    volumes:
      - mongo_data:/data/db

  jpulse-1:
    build: .
    ports:
      - "8080:8080"
    environment:
      - NODE_ENV=production
      - REDIS_HOST=redis
      - MONGODB_URL=mongodb://mongodb:27017/jpulse
    depends_on:
      - redis
      - mongodb

  jpulse-2:
    build: .
    ports:
      - "8081:8080"
    environment:
      - NODE_ENV=production
      - REDIS_HOST=redis
      - MONGODB_URL=mongodb://mongodb:27017/jpulse
    depends_on:
      - redis
      - mongodb

volumes:
  redis_data:
  mongo_data:
</pre>
                </div>

                <h3>ğŸ”„ Graceful Fallback Behavior</h3>
                <div class="local-pros-cons">
                    <div class="local-pros">
                        <h4>âœ… With Redis Enabled</h4>
                        <ul>
                            <li>Full cluster broadcasting</li>
                            <li>Shared session storage</li>
                            <li>Real-time synchronization</li>
                            <li>Load balancer compatibility</li>
                            <li>Horizontal scaling</li>
                        </ul>
                    </div>

                    <div class="local-cons">
                        <h4>âš ï¸ Redis Disabled/Unavailable</h4>
                        <ul>
                            <li>Single-server mode</li>
                            <li>Memory-based sessions</li>
                            <li>Local-only broadcasting</li>
                            <li>No cross-instance sync</li>
                            <li>Still fully functional</li>
                        </ul>
                    </div>
                </div>

                <div class="local-highlight-box">
                    <h4>ğŸ›¡ï¸ Production Considerations</h4>
                    <ul>
                        <li><strong>Redis High Availability:</strong> Use Redis Sentinel or Cluster for production</li>
                        <li><strong>Connection Pooling:</strong> Configure appropriate connection limits</li>
                        <li><strong>Monitoring:</strong> Set up Redis and application health monitoring</li>
                        <li><strong>Security:</strong> Enable Redis AUTH and use TLS in production</li>
                        <li><strong>Backup Strategy:</strong> Regular Redis and MongoDB backups</li>
                    </ul>
                </div>
            </div>

            <!-- Navigation -->
            <div class="jp-btn-nav-group">
                <a href="/" class="jp-btn jp-btn-outline">ğŸ  Home</a>
                <span class="jp-btn-nav-arrow">â†’</span>
                <a href="/hello/" class="jp-btn jp-btn-outline">ğŸŒ Hello World Site Demos</a>
                <span class="jp-btn-nav-arrow">â†’</span>
                <a href="/hello-todo/" class="jp-btn jp-btn-outline">ğŸ“‹ To-Do MVC Demo</a>
                <span class="jp-btn-nav-arrow">â†’</span>
                <a href="/hello-vue/" class="jp-btn jp-btn-outline">ğŸ”„ Vue.js SPA Demo</a>
                <span class="jp-btn-nav-arrow">â†’</span>
                <a href="/hello-websocket/" class="jp-btn jp-btn-outline">ï¿½ WebSocket Real-Time Demo</a>
                <span class="jp-btn-nav-arrow">â†’</span>
                <a href="/hello-app-cluster/" class="jp-btn jp-btn-active">ğŸŒ App Cluster Demo</a>
            </div>
        </div>
    </div>

    {{file.include "jpulse-footer.tmpl"}}
</body>
</html>
