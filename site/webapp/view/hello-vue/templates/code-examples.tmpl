// Code page component, site/webapp/view/hello-vue/templates/code.tmpl
/**
 * @name            jPulse Framework / Site / WebApp / View / Hello Vue / Templates / Code Examples Page
 * @tagline         Code examples of Hello Vue Single Page Application
 * @description     This page shows code examples of the Vue.js SPA
 * @file            site/webapp/view/hello-vue/templates/code.tmpl
 * @version         1.3.11
 * @release         2025-12-08
 * @repository      https://github.com/jpulse-net/jpulse-framework
 * @author          Peter Thoeny, https://twiki.org & https://github.com/peterthoeny/
 * @copyright       2025 Peter Thoeny, https://twiki.org & https://github.com/peterthoeny/
 * @license         BSL 1.1 -- see LICENSE file; for commercial use: team@jpulse.net
 * @genai           60%, Cursor 1.7, Claude Sonnet 4
 */

window.jpSpaRoutes.CodeExamples = {
    template: `
        <div class="jp-card">
            <h2 class="jp-card-dialog-heading">ðŸ’» Code Examples</h2>
            <p class="jp-text">Learn the implementation patterns used in this Vue.js SPA.</p>

            <div class="code-section">
                <h3>1. Vue Router Setup</h3>
                <p class="jp-text">Define routes and create the router with History Mode:</p>
                <div class="jp-source-code" data-lang="javascript" data-show-lang="true"><pre>// Define routes
window.helloVueRoutes = [
    { path: '/overview', component: 'Overview', title: 'Overview' },
    { path: '/todo-demo', component: 'TodoDemo', title: 'Interactive Demo' },
    // ... more routes
];

// Create router
const router = createRouter({
    history: createWebHistory('/hello-vue/'),
    routes: [
        ...window.helloVueRoutes.map(route => ({
            path: route.path,
            component: window.jpSpaRoutes[route.component]
        })),
        { path: '/', redirect: '/overview' }
    ]
});</pre></div>
            </div>

            <div class="code-section">
                <h3>2. Component Structure</h3>
                <p class="jp-text">Components have data, computed properties, methods, and templates:</p>
                <div class="jp-source-code" data-lang="javascript" data-show-lang="true"><pre>window.jpSpaRoutes.TodoDemo = {
    data() {
        return {
            todos: [],
            newTodoTitle: '',
            stats: { totalTodos: 0, completedTodos: 0, pendingTodos: 0 }
        };
    },

    methods: {
        async createTodo() {
            if (!this.newTodoTitle.trim()) return;

            const response = await jPulse.api.call('/api/1/helloTodo', {
                method: 'POST',
                body: { title: this.newTodoTitle.trim() }
            });

            if (response.success) {
                this.todos.unshift(response.data);
                this.newTodoTitle = '';
                this.updateStats();
            }
        }
    },

    mounted() {
        this.fetchTodos();
    },

    template: \`&lt;div&gt;...&lt;/div&gt;\`
};</pre></div>
            </div>

            <div class="code-section">
                <h3>3. Template Organization</h3>
                <p class="jp-text">Templates are loaded from separate .tmpl files using server-side includes:</p>
                <div class="jp-source-code" data-lang="javascript" data-show-lang="true"><pre>// In routing.tmpl
&#123;&#123;file.include "hello-vue/templates/overview.tmpl"&#125;&#125;
&#123;&#123;file.include "hello-vue/templates/todo-demo.tmpl"&#125;&#125;
&#123;&#123;file.include "hello-vue/templates/features.tmpl"&#125;&#125;
&#123;&#123;file.include "hello-vue/templates/code.tmpl"&#125;&#125;
&#123;&#123;file.include "hello-vue/templates/about.tmpl"&#125;&#125;</pre></div>
                <p class="jp-text">Each .tmpl file defines a component in the window.jpSpaRoutes namespace:</p>
                <div class="jp-source-code" data-lang="javascript" data-show-lang="true"><pre>// In todo-demo.tmpl
window.jpSpaRoutes.TodoDemo = {
    template: \`...\`,
    data() { return {...}; },
    methods: {...}
};</pre></div>
            </div>

            <div class="code-section">
                <h3>4. API Integration with jPulse</h3>
                <p class="jp-text">jPulse.api.call() uses an options object with method and body:</p>
                <div class="jp-source-code" data-lang="javascript" data-show-lang="true"><pre>// GET request
const response = await jPulse.api.call('/api/1/helloTodo', {
    method: 'GET'
});
this.todos = response.data;

// POST request
const response = await jPulse.api.call('/api/1/helloTodo', {
    method: 'POST',
    body: { title: 'New todo' }
});

// PUT request
const response = await jPulse.api.call('/api/1/helloTodo/123/toggle', {
    method: 'PUT'
});</pre></div>
            </div>

            <div class="code-section">
                <h3>5. Reactive Data Binding</h3>
                <p class="jp-text">Vue automatically updates the DOM when data changes:</p>
                <div class="jp-source-code" data-lang="html" data-show-lang="true"><pre>&lt;!-- v-for loops through arrays --&gt;
&lt;div v-for="todo in todos" :key="todo._id"&gt;
    &lt;!-- v-model for two-way binding --&gt;
    &lt;input v-model="newTodoTitle" type="text"&gt;

    &lt;!-- Event handlers with @ --&gt;
    &lt;button @click="createTodo"&gt;Add&lt;/button&gt;

    &lt;!-- Conditional classes --&gt;
    &lt;span :class="{ completed: todo.completed }"&gt;
        &#123;&#123; todo.title &#125;&#125;
    &lt;/span&gt;
&lt;/div&gt;</pre></div>
            </div>

            <div class="code-section">
                <h3>6. Router Navigation</h3>
                <p class="jp-text">Navigate programmatically using this.$router.push():</p>
                <div class="jp-source-code" data-lang="javascript" data-show-lang="true"><pre>methods: {
    navigate(path) {
        this.$router.push(path);
    }
},

// Or use router-link in templates:
// &lt;router-link to="/overview"&gt;Overview&lt;/router-link&gt;</pre></div>
            </div>

            <div class="jp-text">
                <h3>Key Takeaways</h3>
                <ul class="jp-list">
                    <li><strong>History Mode:</strong> Clean URLs without # (requires server config)</li>
                    <li><strong>Component Files:</strong> Each page is a separate .tmpl file</li>
                    <li><strong>API Pattern:</strong> jPulse.api.call(url, {method, body})</li>
                    <li><strong>Reactive Updates:</strong> Change data, Vue updates DOM automatically</li>
                    <li><strong>Template Syntax:</strong> Use v-for, v-if, v-model, @click, :class</li>
                </ul>
            </div>
        </div>
    `,

    mounted() {
        // Initialize jPulse source code components after Vue renders the template
        this.$nextTick(() => {
            jPulse.UI.sourceCode.initAll();
        });
    }
};

// EOF Code page component, site/webapp/view/hello-vue/templates/code.tmpl
