/**
 * @name            %SITE_NAME% / Configuration
 * @tagline         Bump version script configuration
 * @description     Configuration file for version bumping across site files
 * @file            site/webapp/bump-version.conf
 * @version         1.0.0
 * @release         %RELEASE_DATE%
 * @repository      https://github.com/jpulse-net/jpulse-framework
 * @author          %AUTHOR%
 * @copyright       %COPYRIGHT_YEAR% %AUTHOR%
 * @license         BSL 1.1 -- see LICENSE file
 */

{
    // File patterns to include in version bump
    filePatterns: [
        // Root level
        'README.md',
        'package.json',

        // Site directory
        'site/webapp/*.conf',
        'site/webapp/*.js',
        'site/webapp/controller/*.js',
        'site/webapp/model/*.js',
        'site/webapp/view/*.css',
        'site/webapp/view/*.js',
        'site/webapp/view/*.tmpl',
        'site/webapp/view/**/*.css',
        'site/webapp/view/**/*.js',
        'site/webapp/view/**/*.shtml',
        'site/webapp/view/**/*.tmpl'
    ],

    // File update rules with regex patterns
    fileUpdateRules: [
        {
            pattern: 'README.md',
            replacements: [
                { from: /^(# .* v)[\d.]+(-[a-z]+\.\d+)?/m,
                  to: (version, match, p1) => `${p1}${version}` }
            ]
        },
        {
            pattern: 'package.json',
            replacements: [
                {
                    from: /"version": "[\d.]+(-[a-z]+\.\d+)?"/,
                    to: (version) => `"version": "${version}"`
                }
            ]
        },
        {
            pattern: 'site/webapp/app.conf',
            replacements: [
                {
                    from: /(version: +['"])[\d.]+(-[a-z]+\.\d+)?/,
                    to: (version, match, p1) => `${p1}${version}`,
                    scope: 'version'
                },
                {
                    from: /(release: +['"])[\d-]+/,
                    to: (release, match, p1) => `${p1}${release}`,
                    scope: 'release'
                }
            ]
        }
    ],

    // Header update patterns (optional - uses defaults if not specified)
    headerUpdatePatterns: {
        version: /([\*#] @version\s+)[\d.]+(-[a-z]+\.\d+)?/,
        release: /([\*#] @release\s+)[\d-]+/
    }
}

// EOF site/webapp/bump-version.conf
