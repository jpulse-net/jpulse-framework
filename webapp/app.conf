/**
 * @name            jPulse Framework / WebApp
 * @tagline         WebApp for jPulse Framework
 * @description     This is the configuration file for the jPulse Framework WebApp
 * @file            webapp/app.conf
 * @version         0.3.6
 * @release         2025-09-01
 * @repository      https://github.com/peterthoeny/jpulse-framework
 * @author          Peter Thoeny, https://twiki.org & https://github.com/peterthoeny/
 * @copyright       2025 Peter Thoeny, https://twiki.org & https://github.com/peterthoeny/
 * @license         GPL v3, see LICENSE file
 * @genai           99%, Cursor 1.2, Claude Sonnet 4
 */

// below configuration is available in the global appConfig object.
// the structure matches the file structure with controllers, views, etc.
{
    app: {
        version:        '0.3.6',
        release:        '2025-09-01',
        name:           'jPulse Framework',
        shortName:      'jPulse',
        copyright:      'Â© 2025 {{app.name}}',
        dirName:        '' // updated by app.js with __dirname
    },
    deployment: {
        mode:           'dev',
        dev: {
            name:       'development',
            db:         'dev',
            port:       8080
        },
        prod: {
            name:       'production',
            db:         'prod',
            port:       8081
        }
    },
    database: {
        mode:           'standalone',
        standalone: {
            url:        'mongodb://localhost:27017/%DB%', // %DB% is deployment[mode].db
            options: {
                // Authentication (uncomment and configure when needed)
                // authSource: '%DB%', // %DB% is deployment[mode].db
                // auth: {
                //     username: 'fixme',
                //     password: 'fixme'
                // },
                serverSelectionTimeoutMS: 5000,
                socketTimeoutMS:        45000,
                connectTimeoutMS:       20000,
                maxPoolSize:            10,
                minPoolSize:            1,
                maxIdleTimeMS:          30000
            }
        },
        replicaSet: {
            servers: [
                'app-001.ca.example.com:20017',
                'app-002.ca.example.com:20017',
                'app-003.ca.example.com:20017'
            ],
            url:        'mongodb://%SERVERS%/%DB%?replicaSet=app-rs', // %SERVERS% is replicaSet.servers
            options: {
                // Authentication (uncomment and configure when needed)
                // authSource: '%DB%', // %DB% is deployment[mode].db
                // auth: {
                //     username: 'fixme',
                //     password: 'fixme'
                // },
                serverSelectionTimeoutMS: 5000,
                socketTimeoutMS:        45000,
                connectTimeoutMS:       20000,
                maxPoolSize:            10,
                minPoolSize:            1,
                maxIdleTimeMS:          30000
            }
        }
    },
    middleware: {
        cors: {
            origin:         '*',
            methods:        'GET,HEAD,PUT,PATCH,POST,DELETE',
            preflightContinue:      false,
            optionsSuccessStatus:   204
        },
        bodyParser: {
            urlencoded: {
                extended:   true,
                limit:      '10mb',
                parameterLimit:     100000
            },
            json: {
                limit:      '10mb'
            }
        }
    },
    session: {
        secret:             'fixme',
        resave:             false,
        saveUninitialized:  false,
        cookie: {
            secure:         false,
            maxAge:         3600000
        }
    },
    i18n: {
        default:            'en'
    },
    model: {
        user: {
            passwordPolicy: {
                minLength:      8
            }
        }
    },
    controller: {
        auth: {
            mode:               'internal',
            internal: {
            },
            ldap: {
                url:            'ldap://localhost:389',
                baseDN:         'dc=example,dc=com',
                bindPass:       'fixme',
                tls: false,
                tlsOptions: {
                    rejectUnauthorized: false,
                    ca:         []
                }
            },
            oauth2: {
                clientID:       'fixme',
                clientSecret:   'fixme',
                redirectURI:    'http://localhost:3000/oauth2/callback'
            }
        },
        log: {
            maxMsgLength:       256
        },
        view: {
            defaultTemplate:    'index.shtml',
            maxIncludeDepth:    10,
            cacheTemplateFiles: true,
            cacheIncludeFiles:  true
        }
    },
    view: {
        maxWidth:               1200,   // max width of the content area
        minMarginLeftRight:     20      // min margin left & right for narrow content area
    }
}

// EOF webapp/app.conf
