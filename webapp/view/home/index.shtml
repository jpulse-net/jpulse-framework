<!DOCTYPE html>
<!--
 * @name            jPulse Framework / WebApp / View / Home
 * @tagline         Home page of jPulse Framework
 * @description     This is the home page of jPulse Framework
 * @file            webapp/view/home/index.shtml
 * @version         0.4.5
 * @release         2025-09-04
 * @repository      https://github.com/peterthoeny/jpulse-framework
 * @author          Peter Thoeny, https://twiki.org & https://github.com/peterthoeny/
 * @copyright       2025 Peter Thoeny, https://twiki.org & https://github.com/peterthoeny/
 * @license         GPL v3, see LICENSE file
 * @genai           99%, Cursor 1.2, Claude Sonnet 4
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{app.version}} - {{i18n.view.home.title}}</title>

    {{file.include "jpulse-header.tmpl"}}
    <style>
        /* Page-specific demo content styles only */
        .demo-spacer {
            height: 200px;
            margin: 20px 0;
            padding: 20px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .demo-spacer-1 { background: linear-gradient(45deg, #e3f2fd, #bbdefb); }
        .demo-spacer-2 { background: linear-gradient(45deg, #f3e5f5, #e1bee7); }
        .demo-spacer-3 { background: linear-gradient(45deg, #e8f5e8, #c8e6c9); }
        .demo-spacer-4 { background: linear-gradient(45deg, #fff3e0, #ffcc02); }
        .demo-spacer-5 { background: linear-gradient(45deg, #ffebee, #ffcdd2); }
    </style>
</head>
<body>
    <div class="jp-main">
        <h1 class="jp-title">ü´ß {{app.name}} - Home Page</h1>

        <!-- Introduction Box (i18n messages) - at the top -->
        <div class="jp-info-box">
            <p>{{i18n.view.home.introduction}}</p>
            <p>{{#if user.authenticated}}{{i18n.view.home.welcomeBack}}{{else}}{{i18n.view.home.notLoggedIn}}{{/if}}</p>
        </div>

        <!-- User Information Box (testing content) -->
        <div class="jp-warning-box">
            <h3>User Information</h3>
            <p>{{#if user.authenticated}}{{i18n.view.home.welcomeBack}}{{else}}{{i18n.view.home.notLoggedIn}}{{/if}}</p>
            {{#if user.authenticated}}<p><strong>User ID:</strong> {{user.id}}</p>{{else}}<p>{{i18n.view.home.pleaseLogin}}</p>{{/if}}
            {{#if user.authenticated}}<p><strong>Name:</strong> {{user.firstName}} {{user.lastName}}</p>{{else}}{{/if}}
            {{#if user.authenticated}}<p><strong>Email:</strong> {{user.email}}</p>{{else}}{{/if}}
        </div>

        <!-- Framework Information Box -->
        <div class="jp-info-box">
            <p><strong>Framework:</strong> {{app.name}}</p>
            <p><strong>Version:</strong> <span class="jp-text-muted jp-text-small">{{app.version}} ({{app.release}})</span></p>
            <p><strong>Current URL:</strong> {{url.domain}}{{url.pathname}}{{url.search}}</p>
            <p><strong>Protocol:</strong> {{url.protocol}}</p>
            <p><strong>Hostname:</strong> {{url.hostname}}</p>
            <p>{{#if url.port}}<strong>Port:</strong> {{else}}{{/if}}{{url.port}}</p>
            <p><strong>Test 404 link:</strong> <a href="/home/x.shtml">/home/x.shtml</a></p>
        </div>

        <!-- Handlebars Demo Box -->
        <div class="jp-card">
            <div class="jp-card-header">
                <h3>Handlebars Demo</h3>
            </div>
            <div class="jp-card-body">
                <p>This page demonstrates various handlebars features:</p>
                <ul>
                    <li><strong>App info:</strong> {{app.version}} / {{app.release}}</li>
                    <li><strong>URL parsing:</strong> {{url.domain}} + {{url.pathname}}</li>
                    <li><strong>URL params:</strong> Try ?name=test ‚Üí {{url.param.name}}</li>
                    <li><strong>User roles:</strong> {{user.roles}}</li>
                    <li><strong>Conditionals:</strong> {{#if user.authenticated}}User {{user.username}} is logged in{{else}}User is guest{{/if}}</li>
                    <li><strong>i18n:</strong>
                        {{#if user.authenticated}}
                          {{i18n.view.auth.login.welcomeBack}}
                        {{else}}
                          {{i18n.view.auth.common.notAuthenticated}}
                        {{/if}}
                    </li>
                    <li><strong>Config:</strong> Admin email: {{config.email.adminEmail}}</li>
                    <li><strong>User object debug:</strong></li>
                    <li><strong>user.authenticated:</strong> {{user.authenticated}}</li>
                    <li><strong>user.id:</strong> {{user.id}}</li>
                    <li><strong>user.username:</strong> {{user.username}}</li>
                    <li><strong>user.firstName:</strong> {{user.firstName}}</li>
                    <li><strong>user.nickName:</strong> {{user.nickName}}</li>
                    <li><strong>user.lastName:</strong> {{user.lastName}}</li>
                    <li><strong>user.email:</strong> {{user.email}}</li>
                    <li><strong>user.roles:</strong> {{user.roles}}</li>
                    <li><strong>user.isAdmin:</strong> {{user.isAdmin}}</li>
                </ul>
            </div>
        </div>

        <!-- Status Information -->
        <p>This is a server-side rendered template using the viewController with handlebars processing.</p>
        <p><strong>Status:</strong> <span class="jp-theme-text-primary" style="color: #007acc; font-weight: bold;">‚úÖ W-006 viewController - IMPLEMENTED</span></p>

        <!-- Sticky Header Test Box -->
        <div class="jp-info-box">
            <h3>üîç Sticky Header Test</h3>
            <p><strong>Instructions:</strong> Scroll down this page to see the sticky header in action!</p>
            <p>The blue header with the jPulse logo should remain fixed at the top of the browser window as you scroll.</p>
        </div>

        <div class="demo-spacer demo-spacer-1">
            <h4>üìè Spacer Content Block 1</h4>
        </div>

        <div class="demo-spacer demo-spacer-2">
            <h4>üìè Spacer Content Block 2</h4>
        </div>

        <div class="demo-spacer demo-spacer-3">
            <h4>üìè Spacer Content Block 3</h4>
        </div>

        <div class="demo-spacer demo-spacer-4">
            <h4>üìè Spacer Content Block 4 - Keep Scrolling!</h4>
        </div>

        <div class="demo-spacer demo-spacer-5">
            <h4>üéØ Bottom Content - Header should still be visible!</h4>
        </div>

        <p><em>File timestamp: {{file.timestamp "jpulse-footer.tmpl"}}</em></p>
    </div>

    {{file.include "jpulse-footer.tmpl"}}
</body>
</html>
