<!-- Start webapp/view/jpulse-footer.tmpl -->
<!--
 * @name            jPulse Framework / WebApp / View / Footer Template
 * @tagline         Footer template for jPulse pages
 * @description     Footer included in all jPulse pages to provide a consistent page layout
 * @file            webapp/view/jpulse-footer.tmpl
 * @version         0.9.1
 * @release         2025-10-05
 * @repository      https://github.com/peterthoeny/jpulse-framework
 * @author          Peter Thoeny, https://twiki.org & https://github.com/peterthoeny/
 * @copyright       2025 Peter Thoeny, https://twiki.org & https://github.com/peterthoeny/
 * @license         AGPL v3, see LICENSE file
 * @genai           60%, Cursor 1.2, Claude Sonnet 4
-->
<!-- Visual Header Banner (positioned at top via CSS) -->
<header class="jp-header">
    <div class="jp-header-content">
        <!-- Mobile Hamburger Menu Icon (W-069) -->
        {{#if appConfig.view.pageDecoration.showSiteNavigation}}
        <button class="jp-hamburger" id="jp-hamburger" aria-label="Menu" aria-expanded="false">
            <span></span>
            <span></span>
            <span></span>
        </button>
        {{/if}}
        <a href="/" class="jp-logo">
            <img src="/images/jpulse-logo/jpulse-logo-reverse.svg" alt="jPulse" height="22" width="22">
            <span class="jp-logo-name">{{app.name}}</span>
            <span class="jp-logo-shortname">{{app.shortName}}</span>
        </a>
        <div class="jp-user-menu">
            <div class="jp-user-icon" onclick="toggleUserMenu(event)">
              {{#if user.authenticated}}
                <span>{{user.initials}}</span>
              {{else}}
                <span>ðŸ‘¤</span>
              {{/if}}
            </div>
            <div class="jp-dropdown" id="userDropdown">
              {{#if user.authenticated}}
                <a href="/user/">{{i18n.view.user.index.dashboard}}</a>
                <a href="/user/profile.shtml">{{i18n.view.auth.common.profile}}</a>
                <a href="/auth/logout.shtml">{{i18n.view.auth.common.signout}}</a>
              {{else}}
                <a href="/auth/login.shtml">{{i18n.view.auth.common.signin}}</a>
                <a href="/auth/signup.shtml">{{i18n.view.auth.common.signup}}</a>
              {{/if}}
              {{#if user.isAdmin}}
                <a href="/admin/">{{i18n.view.user.index.adminDashboard}}</a>
              {{/if}}
            </div>
        </div>
    </div>
</header>

<!-- Mobile Menu Overlay (W-069) -->
{{#if appConfig.view.pageDecoration.showSiteNavigation}}
<div class="jp-mobile-menu-overlay" id="jp-mobile-menu-overlay"></div>
<nav class="jp-mobile-menu" id="jp-mobile-menu" aria-label="Mobile Navigation"></nav>
{{/if}}

<!-- Footer -->
<footer class="jp-footer">
    <div class="jp-footer-content">
        <div class="jp-footer-left">
            <span>&copy; 2025 {{app.name}}</span>
            <a href="/about">{{i18n.view.common.about}}</a>
        </div>
        <div class="jp-footer-right">
            <span class="jp-version"><a href="https://jpulse.net/" target="_blank">Powered by jPulse Framework {{app.version}}</a></span>
        </div>
    </div>
</footer>

<!-- Site Navigation Initialization (W-069) -->
{{file.include "jpulse-navigation.tmpl"}}
{{#if appConfig.view.pageDecoration.showSiteNavigation}}
<style>
:root {
    --jp-header-height: {{appConfig.view.pageDecoration.headerHeight}}px;
}
</style>
<script>
// Initialize site navigation when DOM is ready
jPulse.dom.ready(() => {
    jPulse.UI.navigation.init({
        currentUrl: '{{url.pathname}}',
        userRoles: {{user.roles}},
        navigation: window.jPulseSiteNavigation
    });
});
</script>
{{/if}}

<!-- EOF webapp/view/jpulse-footer.tmpl -->
